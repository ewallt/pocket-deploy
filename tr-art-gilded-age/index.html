<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Threaded Reader</title>

  <!-- Prepaint bootstrap: set dark + theme class before paint to avoid flicker -->
  <script>
  (function () {
    const root = document.documentElement;
    try {
      const savedTheme = localStorage.getItem('theme');       // 'light' | 'dark' | null
      const savedColor = localStorage.getItem('colorScheme'); // 'slate' | 'emerald' | future
      const isDark = savedTheme !== 'light';                  // default to dark if unset
      root.classList.toggle('dark', isDark);
      // Apply colored theme classes ONLY in dark mode; light is always neutral slate
      root.classList.toggle('theme-emerald', isDark && savedColor === 'emerald');
    } catch (_) {}
  })();
  </script>

  <!-- Tailwind (with Typography) -->
  <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>

  <!-- Google Font (optional) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">

  <style>
  :root { color-scheme: light dark; }
  html { scroll-behavior: smooth; }
  .font-newspaper { font-family: 'Lora', serif; }
  :where(h2,h3,h4){ scroll-margin-top: 84px; }
  mark { background: #fde68a; padding: .1em .2em; border-radius: .2rem; }
  @media (max-width: 380px){ .prose { font-size: .96rem; } }

  /* ---------- Semantic surfaces (read from CSS variables) ---------- */
.hero {
  /* give the header an explicit base fill so gradient blends to the right hue */
  background-color: var(--hero-base);
  background:
    radial-gradient(50% 120% at 10% 10%, var(--hero-r1), transparent 60%),
    radial-gradient(80% 140% at 90% 10%, var(--hero-r2), transparent 70%),
    linear-gradient(180deg, var(--hero-wash), transparent 35%);
}
.border-var { border-color: var(--border) !important; }
.surface { border-width: 1px; border-style: solid; border-color: var(--border); }
.hr-var { border-color: var(--border); }
.subtitle { color: var(--subtitle-fg); }
.timeline-fg { color: var(--timeline-fg); }
.footer-note { color: var(--footer-fg); }
.active-link { color: var(--active); font-weight: 700; }

.input-surface {
  border: 1px solid var(--input-border);
  background-color: var(--input-bg);
}
.btn-surface { border: 1px solid var(--btn-border); }
.btn-surface:hover { background: var(--btn-hover-bg); }
.toc-link:hover { background: var(--hover-bg); }

/* ---------- Slate (default) variables ---------- */
:root{
  /* accents / inks */
  --active: rgb(59,130,246);                      /* sky-500 */
  --subtitle-fg: rgb(71,85,105);                  /* slate-600 */
  --timeline-fg: rgb(100,116,139);                /* slate-500 */
  --footer-fg: rgb(100,116,139);                  /* slate-500 */

  /* surfaces */
  --border: rgb(226,232,240);                     /* slate-200 */
  --hover-bg: rgb(248,250,252);                   /* slate-50 */
  --btn-border: rgb(203,213,225);                 /* slate-300 */
  --btn-hover-bg: rgb(248,250,252);               /* slate-50 */
  --input-border: rgba(203,213,225,0.7);          /* slate-300/70 */
  --input-bg: rgba(255,255,255,0.7);              /* white/70 */

  /* hero base & gradient (light) */
  --hero-base: transparent;                       /* keep light header airy */
  --hero-r1: rgba(49,46,129,.12);                 /* indigo-700 */
  --hero-r2: rgba(234,88,12,.12);                 /* orange-600 hint */
  --hero-wash: rgba(14,165,233,.08);              /* sky-500 wash */
}
.dark{
  --subtitle-fg: rgb(203,213,225);                /* slate-300 */
  --timeline-fg: rgb(148,163,184);                /* slate-400 */
  --footer-fg: rgb(148,163,184);                  /* slate-400 */

  --border: rgb(30,41,59);                        /* slate-800 */
  --hover-bg: rgb(15,23,42);                      /* slate-900 */
  --btn-border: rgb(51,65,85);                    /* slate-700 */
  --btn-hover-bg: rgb(15,23,42);                  /* slate-900 */
  --input-border: rgba(51,65,85,0.7);             /* slate-700/70 */
  --input-bg: rgba(2,6,23,0.6);                   /* slate-950/60 */

  /* hero base & gradient (dark) */
  --hero-base: rgb(2,6,23);                       /* slate-950 */
  --hero-r1: rgba(49,46,129,.12);
  --hero-r2: rgba(234,88,12,.12);
  --hero-wash: rgba(14,165,233,.08);
}

/* ---------- Emerald theme overrides (light & dark) ---------- */
.theme-emerald{
  --active: #10b981;                              /* emerald-500 */

  --border: rgb(187,247,208);                     /* emerald-200 */
  --hover-bg: rgb(240,253,244);                   /* emerald-50 */
  --btn-border: rgb(187,247,208);                 /* emerald-200 */
  --btn-hover-bg: rgb(240,253,244);               /* emerald-50 */
  --input-border: rgba(110,231,183,0.7);          /* emerald-300/70 */
  --input-bg: rgba(255,255,255,0.7);              /* white/70 */

  /* keep subtitles/timeline neutral for readability over hero */
  --subtitle-fg: rgb(71,85,105);                  /* slate-600 */
  --timeline-fg: rgb(71,85,105);                  /* slate-600 */
  --footer-fg: rgb(16,185,129);                   /* emerald-500 */

  /* hero base & gradient (emerald light) */
  --hero-base: transparent;
  --hero-r1: rgba(16,185,129,.14);                /* emerald-500 */
  --hero-r2: rgba(163,230,53,.12);                /* lime-400 */
  --hero-wash: rgba(5,150,105,.10);               /* emerald-600 wash */
}
.dark.theme-emerald{
  /* ↑ Give borders enough contrast on dark emerald surfaces */
  --border: rgba(110,231,183,0.55);                /* emerald-300 @ 55% */
  --hover-bg: rgb(6,78,59);                        /* emerald-900 */
  --btn-border: rgba(110,231,183,0.45);            /* slightly softer than borders */
  --btn-hover-bg: rgb(6,78,59);                    /* emerald-900 */
  --input-border: rgba(110,231,183,0.55);          /* match border contrast */
  --input-bg: rgba(6,95,70,0.60);                  /* emerald-900/60 */

  /* text accents for readability */
  --footer-fg: rgb(110,231,183);                   /* emerald-300/400 */
  --subtitle-fg: rgb(226,252,236);                 /* emerald-100 */
  --timeline-fg: rgb(187,247,208);                 /* emerald-200 */

  /* hero base & gradient (unchanged, stays emerald) */
  --hero-base: rgb(2,44,34);                       /* emerald-950 (#022c22) */
  --hero-r1: rgba(16,185,129,.14);
  --hero-r2: rgba(163,230,53,.12);
  --hero-wash: rgba(5,150,105,.10);
}

</style>

</head>

<body class="bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100 pb-[env(safe-area-inset-bottom)]">

  <!-- Header -->
  <header id="top" class="hero border-b border-var">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex items-center justify-between gap-4">
      <div>
        <h1 id="docTitle" class="text-2xl sm:text-3xl font-bold font-newspaper tracking-tight">Loading...</h1>
        <p id="docSubtitle" class="subtitle text-sm sm:text-base"></p>
      </div>
      <div class="flex items-center gap-2">
        <label for="search" class="sr-only">Search</label>
        <input id="search" type="search" placeholder="Search…" class="hidden md:block w-56 rounded-xl input-surface px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-400" />
        <button id="clearSearch" type="button" class="hidden md:inline-flex text-xs px-2 py-2 rounded-lg btn-surface">Clear</button>
        <button id="colorSchemeToggle" type="button" class="inline-flex items-center justify-center rounded-xl btn-surface px-3 py-2 text-sm" title="Change color scheme">
          <span class="inline md:hidden">Colors</span>
          <svg aria-hidden="true" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="13.5" cy="6.5" r=".5" fill="currentColor"/>
            <circle cx="17.5" cy="10.5" r=".5" fill="currentColor"/>
            <circle cx="8.5" cy="7.5" r=".5" fill="currentColor"/>
            <circle cx="6.5" cy="12.5" r=".5" fill="currentColor"/>
            <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 7.012 17.461 2 12 2z"/>
          </svg>
        </button>
        <button id="themeToggle" type="button" class="inline-flex items-center justify-center rounded-xl btn-surface px-3 py-2 text-sm" title="Toggle dark mode" aria-pressed="false">
          <span class="inline md:hidden">Theme</span>
          <svg aria-hidden="true" class="w-5 h-5 hidden dark:block" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <svg aria-hidden="true" class="w-5 h-5 dark:hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
        </button>
      </div>
    </div>

    <!-- Timeline -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-6" id="timelineWrap" hidden>
      <nav aria-label="Journey timeline" id="timelineNav" class="timeline-fg">
        <ol id="timeline" class="grid grid-cols-3 sm:grid-cols-6 items-center gap-x-2 gap-y-1 text-[11px] sm:text-sm"></ol>
        <div id="timelineCoda" class="mt-2 text-[11px] sm:text-xs"></div>
      </nav>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 grid grid-cols-1 lg:grid-cols-[260px_minmax(0,1fr)] gap-8">
    <!-- Sidebar -->
    <aside class="lg:sticky lg:top-4 h-max">
      <nav aria-label="On this page" class="rounded-2xl surface p-4">
        <h2 class="text-sm font-semibold mb-2">Sections</h2>
        <ol id="toc" class="space-y-1 text-sm"></ol>
        <hr class="my-4 hr-var" />
        <button id="expandAll" type="button" class="w-full text-xs px-3 py-2 rounded-lg btn-surface">Expand All</button>
        <button id="collapseAll" type="button" class="mt-2 w-full text-xs px-3 py-2 rounded-lg btn-surface">Collapse All</button>
      </nav>
    </aside>

    <section id="content" class="prose prose-slate dark:prose-invert max-w-none">
      <!-- Content is generated by script from JSON -->
    </section>
  </main>

  <footer class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 text-xs footer-note">
    Threaded Reader — a single-file template
  </footer>

  <script id="embedded-json" type="application/json">
    {
      "title": "American Masters: Art in the Gilded Age",
      "description": "An exploration of the artists who defined American painting from the post-Civil War era to the dawn of the 20th century, capturing a nation's complex identity through virtuosic European techniques and a search for a distinctly American voice.",
      "articles": [
        {
          "title": "John Singer Sargent",
          "introduction": "This article focuses on the master of the 'grand manner' portrait, an American who conquered the European art world but remained deeply connected to his home country.",
          "threads": [
            {
              "title": "The Effortless Virtuoso",
              "content": "<p>John Singer Sargent (1856-1925) is celebrated for his dazzling and seemingly effortless brushwork, which established him as the preeminent society portraitist of the Gilded Age. His ability to capture not just a likeness but the very essence of his sitters—their confidence, wealth, and social standing—made him highly sought after on both sides of the Atlantic. His portraits are characterized by a vibrant immediacy, created by his direct, alla prima ('at first attempt') painting method, where layers of wet paint were applied without waiting for previous ones to dry, giving his work a fresh and spontaneous quality that was unmatched.</p>"
            },
            {
              "title": "A Cosmopolitan Education",
              "content": "<p>Born in Florence to American expatriate parents, Sargent was a true cosmopolitan, fluent in several languages and trained in the heart of the European art world. His formal artistic education in Paris, under the tutelage of the fashionable portraitist Carolus-Duran, was crucial. From his master, Sargent learned to paint directly onto the canvas with a loaded brush, focusing on masses of light and shadow rather than precise preliminary drawings. This training, combined with his intensive study of Old Masters like Velázquez and Hals, gave him a technical foundation that blended classical authority with modern vibrancy.</p>"
            },
            {
              "title": "The Scandal of Madame X",
              "content": "<p>Sargent's early career in Paris was dramatically altered by the scandalous reception of his 1884 masterpiece, *Portrait of Madame X*. The painting, a striking portrait of the Parisian socialite Virginie Gautreau, was criticized for its stark profile, unconventional skin tone, and what was seen as an overtly sensual pose—originally with one jeweled strap hanging off her shoulder. The public outcry was so severe that it damaged Sargent's reputation in Paris, prompting his move to London. This event was pivotal, pushing him to cultivate a client base in Britain and, increasingly, in the United States, where his bold style was more readily appreciated.</p>"
            },
            {
              "title": "Capturing Character",
              "content": "<p>While celebrated for capturing the shimmering fabrics and opulent settings of the elite, Sargent's greatest talent lay in his psychological insight. His portraits were more than just flattering depictions; they were incisive character studies that revealed the personality beneath the polished exterior. In works like his portrait of the author Henry James or the philanthropist Isabella Stewart Gardner, he conveyed a sense of interiority and intellectual weight. He masterfully used pose, gesture, and expression to communicate the sitter's confidence, vulnerability, or ambition, making his portraits compelling documents of the era's leading figures.</p>"
            },
            {
              "title": "Beyond Portraiture: The Watercolors",
              "content": "<p>Later in his career, growing tired of the demands of portraiture, Sargent turned increasingly to watercolor, a medium he handled with breathtaking skill and freedom. Painted for his own pleasure during his travels through Europe and the Middle East, these works show a more experimental and Impressionistic side of his art. He used the fluid, transparent medium to capture fleeting effects of light on water, stone, and foliage with remarkable economy and brilliance. These watercolors are now considered among his greatest achievements, demonstrating a pure love of painting unburdened by the expectations of a commission.</p>"
            },
            {
              "title": "The Boston Murals: An American Legacy",
              "content": "<p>In his later years, Sargent dedicated two decades to a major public commission that he considered his most important work: the mural cycles for the Boston Public Library. Titled *The Triumph of Religion*, this ambitious project was an allegorical depiction of the history of world religions. The immense undertaking was both physically and intellectually exhausting, requiring deep research and a departure from his fluid painting style. While the murals received mixed reviews, they represent Sargent's desire to create a lasting, monumental legacy in his home country and to prove his mastery beyond the realm of portraiture.</p>"
            },
            {
              "title": "Sargent's Enduring Influence",
              "content": "<p>John Singer Sargent's legacy is complex; he was a traditionalist who mastered classical techniques yet possessed a modern sensibility in his bold brushwork and psychological depth. For decades after his death, his work was often dismissed by modernist critics as old-fashioned. However, a major re-evaluation has restored his reputation as one of the great masters of Western art. His technical brilliance, his command of the brush, and his insightful characterizations continue to inspire and influence generations of figurative and portrait painters who see in his work a timeless fusion of skill and artistry.</p>"
            }
          ]
        },
        {
          "title": "Winslow Homer",
          "introduction": "This article presents a powerful counterpoint to Sargent. Homer was the quintessential American artist, whose work focused on rugged, national themes and the raw power of nature.",
          "threads": [
            {
              "title": "An American Vision",
              "content": "<p>Winslow Homer (1836-1910) stands as one of the most original voices in American art, a painter whose work is defined by its rugged independence and profound connection to the national landscape. In contrast to the cosmopolitan elegance of Sargent, Homer forged a distinctly American vision, focusing on themes of self-reliance, the struggle for survival, and the elemental power of nature. His art is direct and powerful, free from European affectation and deeply rooted in the realities of American life, from the battlefields of the Civil War to the stormy coasts of New England.</p>"
            },
            {
              "title": "From Illustrator to Painter",
              "content": "<p>Homer began his career as a successful freelance illustrator for publications like *Harper's Weekly*, a profession that profoundly shaped his artistic development. This work required him to be a keen observer and a skilled draftsman, capable of composing compelling narratives with clarity and precision. His assignments covering the Civil War from the front lines trained him to capture the essence of a scene quickly and effectively. This foundation in graphic arts and journalism instilled in his later paintings a strong sense of structure and storytelling that would remain a hallmark of his style.</p>"
            },
            {
              "title": "The Realities of War and Reconstruction",
              "content": "<p>When Homer transitioned to oil painting, he applied his illustrator's eye to the weighty subjects of the Civil War and its aftermath. Unlike grand, heroic battle scenes, his paintings like *Prisoners from the Front* offered a quiet, psychologically complex view of the conflict's human dimension. During Reconstruction, he created some of the most sensitive and dignified portrayals of African American life of the era, such as *The Cotton Pickers*, treating his subjects with a respect and realism that was groundbreaking for his time.</p>"
            },
            {
              "title": "Man Versus Nature",
              "content": "<p>The central and most powerful theme of Homer's mature work is the dramatic, often perilous relationship between humanity and the natural world. In iconic paintings like *The Fog Warning* and *The Life Line*, he depicts the daily struggles of fishermen and sailors against the immense and indifferent power of the sea. His work is not a romantic celebration of nature but an unsentimental exploration of survival, endurance, and the primal forces that shape human existence. These paintings capture the raw, elemental drama of life on the edge of civilization.</p>"
            },
            {
              "title": "The Solitude of Prout's Neck",
              "content": "<p>In 1883, Homer sought creative isolation by moving to a remote studio on the rocky coast of Prout's Neck, Maine. This move marked a turning point, as he focused almost exclusively on the sea as his primary subject. His late seascapes, such as *Northeaster*, are his most powerful and innovative works, often devoid of human figures, capturing the sheer weight and force of the ocean with an almost abstract intensity. In the solitude of Maine, he distilled his art to its essential elements, creating a body of work that is both profoundly American and universally resonant.</p>"
            },
            {
              "title": "Master of Watercolor",
              "content": "<p>Winslow Homer was instrumental in elevating watercolor from a preparatory sketching medium to a major American art form. He mastered the difficult technique, using its transparency and fluidity to capture brilliant effects of light and atmosphere with stunning directness. Whether depicting the vibrant tropics of the Caribbean or the rustic wilderness of the Adirondacks, his watercolors are celebrated for their technical virtuosity and fresh, spontaneous vision. He demonstrated that watercolor could possess the same power and seriousness as oil painting, influencing the course of American art for generations.</p>"
            },
            {
              "title": "A Legacy of Rugged Individualism",
              "content": "<p>Winslow Homer's legacy is that of a foundational figure in American realism, an artist who defined a national aesthetic rooted in pragmatism, self-reliance, and an honest engagement with the natural world. He remained fiercely independent throughout his career, resisting artistic trends and developing a style that was entirely his own. His work provided a powerful alternative to the European-influenced art of his contemporaries, creating a vision of America that was at once beautiful, dangerous, and deeply authentic.</p>"
            }
          ]
        },
        {
          "title": "Thomas Eakins",
          "introduction": "This article explores the most uncompromising realist of the era, an artist and teacher whose dedication to scientific truth and anatomy often brought him into conflict with the conservative art world.",
          "threads": [
            {
              "title": "The Unflinching Realist",
              "content": "<p>Thomas Eakins (1844-1916) was the foremost and most uncompromising realist of his generation in American art. His core philosophy was a profound, almost scientific, respect for factual truth, which he pursued through rigorous study of anatomy, perspective, and direct observation. He rejected the idealized and sentimental subjects popular at the time, choosing instead to paint the unvarnished reality of modern American life, from surgeons in the operating theater to rowers on the Schuylkill River. This dedication to truth often put him at odds with the public and the art establishment, who found his work too stark and scientifically detached.</p>"
            },
            {
              "title": "Scientific Foundations: Paris and Anatomy",
              "content": "<p>Eakins built his art on a foundation of rigorous scientific and academic training. He studied in Paris under the arch-academic painter Jean-Léon Gérôme, where he perfected his draftsmanship and compositional skills. Uniquely, upon returning to Philadelphia, he also enrolled in anatomy courses at Jefferson Medical College, participating in dissections to gain a deep, first-hand understanding of the human body. This scientific knowledge was not just academic for Eakins; it was essential to his goal of representing the human figure with complete accuracy and integrity.</p>"
            },
            {
              "title": "The Gross Clinic: A Masterpiece Rejected",
              "content": "<p>In 1876, Eakins painted his monumental masterpiece, *The Portrait of Dr. Samuel D. Gross (The Gross Clinic)*, depicting the famed surgeon lecturing in a surgical amphitheater. He submitted it to the art exhibition of the Philadelphia Centennial Exposition, but the jury rejected it, deeming its graphic depiction of surgery too shocking and inappropriate for an art gallery. The painting was relegated to a medical exhibit instead. This rejection was a major blow to Eakins but cemented his reputation as a fearless realist who refused to compromise his vision for popular taste; today, it is considered one of the greatest American paintings ever made.</p>"
            },
            {
              "title": "The Psychology of the Portrait",
              "content": "<p>Eakins's portraits are powerful for their psychological depth and sober honesty. He stripped away the social pretense often found in the work of contemporaries like Sargent, focusing instead on the thoughtful, often melancholy, interior life of his sitters. His subjects are rarely smiling; they appear lost in thought, revealing a quiet dignity and intellectual weight. He painted scientists, musicians, and thinkers, preferring to capture the intellectual and professional character of his subjects rather than merely their wealth or social status.</p>"
            },
            {
              "title": "Art in Motion: The Photography of Eakins",
              "content": "<p>Eakins was a pioneer in the use of photography as a tool for artistic and scientific study. Working alongside photographer Eadweard Muybridge, he conducted his own motion studies, developing a special camera to capture the sequential movements of athletes and animals. He did not see photography as a replacement for painting, but as an invaluable aid for understanding anatomy in motion more accurately. This embrace of modern technology as a tool for art was forward-thinking and placed him at the intersection of art and science.</p>"
            },
            {
              "title": "Controversy as a Teacher",
              "content": "<p>As an instructor at the Pennsylvania Academy of the Fine Arts (PAFA), Eakins was both influential and controversial. He revolutionized art education by emphasizing dissection, rigorous life drawing, and a scientific approach. However, his methods clashed with Victorian sensibilities. In 1886, he was forced to resign after removing the loincloth from a male model in a co-ed life drawing class to better demonstrate anatomy. The scandal highlighted the conflict between his unyielding commitment to realism and the conservative social mores of his time.</p>"
            },
            {
              "title": "The Father of American Realism",
              "content": "<p>Despite the controversies and lack of widespread recognition during his lifetime, Thomas Eakins's profound influence has earned him the title of the 'father of American realism.' His integrity, his rigorous methods, and his dedication to painting the truth of American life inspired a generation of artists, including the members of the Ashcan School. He established a tradition of realism in American art that valued honesty and directness above all, leaving a legacy that champions the intellectual and moral seriousness of the artistic endeavor.</p>"
            }
          ]
        },
        {
          "title": "The Ashcan School",
          "introduction": "This final article covers the movement that directly challenged the Gilded Age aesthetic, turning away from European subjects and society portraits to depict the raw, energetic, and often gritty reality of modern city life.",
          "threads": [
            {
              "title": "Art for Life's Sake",
              "content": "<p>The Ashcan School was not a formal movement but a group of rebellious artists in the early 20th century who shared a common philosophy: to paint the reality of modern urban life, warts and all. Their motto, 'art for life's sake,' was a direct rejection of the aestheticism of 'art for art's sake.' They turned their backs on the polite, academic subjects of the Gilded Age and instead found their inspiration in the bustling, chaotic, and often impoverished streets of New York City.</p>"
            },
            {
              "title": "Robert Henri: The Charismatic Leader",
              "content": "<p>The intellectual and spiritual leader of the Ashcan School was the charismatic painter and teacher Robert Henri. He encouraged his students and colleagues to be 'men of their time,' to paint with speed and spontaneity, and to find beauty and truth in the everyday urban experience. Henri's philosophy, articulated in his influential book *The Art Spirit*, inspired a generation of artists to look at their own environment for subject matter rather than imitating European styles.</p>"
            },
            {
              "title": "The Rise of 'The Eight'",
              "content": "<p>The Ashcan School first gained public notice through a landmark 1908 exhibition by a group that critics dubbed 'The Eight.' Organized by Robert Henri, the show was a direct protest against the conservative and exclusive exhibition policies of the powerful National Academy of Design. The exhibition was a sensation, shocking the public with its gritty, realistic depictions of city life and establishing the group as a major force in American art.</p>"
            },
            {
              "title": "Painting the Urban Spectacle",
              "content": "<p>The artists of the Ashcan School captured the full spectrum of the urban spectacle. John Sloan painted the intimate, unglamorous moments of working-class life on tenement rooftops and in bustling saloons. Everett Shinn depicted the gaslit drama of vaudeville theaters and music halls, while George Luks captured the vibrant energy of children playing in the streets of the Lower East Side. Their work provides an invaluable and authentic portrait of New York City during a period of immense social change and immigration.</p>"
            },
            {
              "title": "A Darker, Grittier Palette",
              "content": "<p>Technically, the Ashcan painters differed significantly from their Impressionist contemporaries. They favored a darker, more tonal palette reminiscent of older masters like Hals and Manet. Their brushwork was rapid, vigorous, and sketch-like, aiming to capture the fleeting energy of a moment in a journalistic fashion. This direct, robust style was perfectly suited to their subject matter, conveying the raw vitality of the city rather than its picturesque qualities.</p>"
            },
            {
              "title": "George Bellows: The Boxer and the City",
              "content": "<p>Though not one of 'The Eight,' George Bellows was a close associate and perhaps the most famous artist of the Ashcan School. He is best known for his dramatic and visceral paintings of illegal prize fights, such as *Stag at Sharkey's*. These works, with their writhing figures and dramatic lighting, captured the brutal energy and raw masculinity of the urban underworld. Bellows applied the same dynamic energy to his depictions of construction sites, polo matches, and crowded city parks, becoming a powerful chronicler of early 20th-century New York.</p>"
            },
            {
              "title": "The Armory Show of 1913",
              "content": "<p>The rebellious realism of the Ashcan School was soon eclipsed by an even greater artistic revolution. The 1913 Armory Show introduced American audiences to European Modernism, including the radical works of Cubists like Picasso and Marcel Duchamp. The abstract and conceptual nature of this new European art made the Ashcan School's realism seem conservative by comparison. This landmark exhibition marked a major turning point, shifting the focus of the American avant-garde away from realism and toward abstraction.</p>"
            },
            {
              "title": "Legacy of Social Realism",
              "content": "<p>Despite being overshadowed by Modernism, the Ashcan School left a vital and lasting legacy. They firmly established the American city as a legitimate and important subject for serious art. Their commitment to social realism and depicting the lives of ordinary people paved the way for the politically engaged art of the 1930s and beyond. They validated an approach to art that was democratic, journalistic, and deeply engaged with the contemporary American experience.</p>"
            }
          ]
        }
      ]
    }
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // ===== Utilities =====
      const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));
      const slug = s => s.toLowerCase().replace(/[^a-z0-9\s-]/g,'').trim().replace(/\s+/g,'-');

      // ===== Read Metadata from JSON =====
      let jsonData = {};
      try {
        jsonData = JSON.parse(document.getElementById('embedded-json').textContent);
      } catch (e) {
        console.error("Error parsing embedded JSON:", e);
        document.getElementById('docTitle').textContent = 'Error Loading Content';
        return;
      }
      const docTitle = jsonData.title || 'Untitled Document';
      const docSubtitle = jsonData.description || '';
      const timelineStepsData = jsonData.timeline_steps;
      const timelineLabelsData = jsonData.timeline_labels;
      
      // ===== Populate Header from Metadata =====
      document.getElementById('docTitle').textContent = docTitle;
      document.getElementById('docSubtitle').textContent = docSubtitle;
      document.title = docTitle;

      // ===== Build Content from JSON =====
      const contentSection = document.getElementById('content');
      let contentHtml = '';
      if (jsonData.articles) {
        jsonData.articles.forEach(article => {
          contentHtml += `<article id="${slug(article.title)}">`;
          contentHtml += `<h2>${article.title}</h2>`;
          if (article.introduction) {
            contentHtml += `<p>${article.introduction}</p>`;
          }
          if (article.threads) {
            article.threads.forEach(thread => {
              contentHtml += `<details open>`;
              contentHtml += `<summary><h3>${thread.title}</h3></summary>`;
              if (thread.content) {
                contentHtml += `<div class="pl-4 border-l-2 border-var">${thread.content}</div>`;
              }
              contentHtml += `</details>`;
            });
          }
          contentHtml += `</article>`;
        });
      }
      contentSection.innerHTML = contentHtml;

      // ===== Theme packs =====
      const THEME_PACKS = {
        slate: {
          proseClass: 'prose-slate',
          bodyClass: 'bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100 pb-[env(safe-area-inset-bottom)]'
        },
        emerald: {
          proseClass: 'prose-emerald',
          bodyClass: 'bg-white text-emerald-900 dark:bg-emerald-950 dark:text-emerald-100 pb-[env(safe-area-inset-bottom)]'
        }
      };
      const availableThemes = Object.keys(THEME_PACKS);

      function applyTheme(themeKey){
        const root = document.documentElement;
        const isDark = root.classList.contains('dark');
        const pack = THEME_PACKS[themeKey] || THEME_PACKS.slate;
        root.classList.toggle('theme-emerald', isDark && themeKey === 'emerald');
        document.body.className = isDark ? pack.bodyClass : THEME_PACKS.slate.bodyClass;
        contentSection.className = `prose ${pack.proseClass} dark:prose-invert max-w-none`;
        try { localStorage.setItem('colorScheme', themeKey); } catch(_){}
      }

      let currentThemeIndex = 0;
      try {
        const saved = localStorage.getItem('colorScheme');
        if (saved && THEME_PACKS[saved]) currentThemeIndex = availableThemes.indexOf(saved);
      } catch(_) {}
      
      const colorBtn = document.getElementById('colorSchemeToggle');
      colorBtn?.addEventListener('click', () => {
        const root = document.documentElement;
        if (!root.classList.contains('dark')) {
          root.classList.add('dark');
          try { localStorage.setItem('theme','dark'); } catch(_){}
          document.getElementById('themeToggle')?.setAttribute('aria-pressed','true');
          applyTheme(availableThemes[currentThemeIndex]); // apply color when switching to dark
          return;
        }
        currentThemeIndex = (currentThemeIndex + 1) % availableThemes.length;
        const newTheme = availableThemes[currentThemeIndex];
        applyTheme(newTheme);
        buildTOC();
      });

      const themeBtn = document.getElementById('themeToggle');
      if (themeBtn) {
        themeBtn.setAttribute('aria-pressed', String(document.documentElement.classList.contains('dark')));
      }
      themeBtn?.addEventListener('click', () => {
        const root = document.documentElement;
        const isDark = root.classList.toggle('dark');
        try { localStorage.setItem('theme', isDark ? 'dark' : 'light'); } catch(_){}
        themeBtn.setAttribute('aria-pressed', String(isDark));

        if (!isDark) {
          root.classList.remove('theme-emerald');
          applyTheme('slate');
        } else {
          let saved = 'slate';
          try { const s = localStorage.getItem('colorScheme'); if (s) saved = s; } catch(_){}
          applyTheme(saved);
        }
        buildTOC();
      });

      // ===== Expand/Collapse, TOC, Timeline, Search (Functions now use the dynamically generated content) =====
      const getDetails = () => document.querySelectorAll('#content details');
      const expandBtn = document.getElementById('expandAll');
      const collapseBtn = document.getElementById('collapseAll');

      if (getDetails().length === 0) {
        if(expandBtn) expandBtn.hidden = true;
        if(collapseBtn) collapseBtn.hidden = true;
      } else {
        expandBtn?.addEventListener('click', () => { getDetails().forEach(d => d.open = true); });
        collapseBtn?.addEventListener('click', () => { getDetails().forEach(d => d.open = false); });
      }

      (function addBackToTopLinks(){
        $$('#content > article').forEach((article, index, arr) => {
          if (index === arr.length - 1) return;
          const wrapper = document.createElement('div');
          wrapper.className = 'mt-6 flex justify-end';
          wrapper.innerHTML = `<a href="#top" class="text-sm underline decoration-dotted">Back to top</a>`;
          article.appendChild(wrapper);
        });
      })();

      function buildTOC(){
        const toc = document.getElementById('toc');
        if (!toc) return;
        const headings = $$('#content h2, #content h3');
        const items = headings.map(h => {
          const parentArticle = h.closest('article');
          const parentSlug = parentArticle ? parentArticle.id : '';
          if (!h.id) h.id = parentSlug + '-' + slug(h.textContent);
          return { id: h.id, text: h.textContent.trim(), level: h.tagName.toLowerCase() };
        });

        toc.innerHTML = items.map(({id, text, level}) => {
          const pad = level === 'h3' ? ' pl-4' : '';
          return `<li><a href="#${id}" class="toc-link block px-2 py-1.5 rounded${pad}">${text}</a></li>`;
        }).join('');

        const links = $$('#toc a');
        const sections = items.map(i => document.getElementById(i.id));
        const obs = new IntersectionObserver(entries => {
          entries.forEach(e => {
            if (e.isIntersecting) {
              links.forEach(a => a.classList.remove('active-link'));
              const id = '#' + e.target.id;
              const active = links.find(a => a.getAttribute('href') === id);
              active?.classList.add('active-link');
            }
          });
        }, { rootMargin: '-40% 0px -55% 0px', threshold: 0.01 });
        sections.forEach(sec => sec && obs.observe(sec));
      }
      
      (function buildTimeline(){
        const wrap = document.getElementById('timelineWrap');
        const list = document.getElementById('timeline');
        const coda = document.getElementById('timelineCoda');

        if (!timelineStepsData || !wrap || !list) { if(wrap) wrap.hidden = true; return; }
        const steps = timelineStepsData.split(',').map(s => s.trim());
        const labels = timelineLabelsData ? timelineLabelsData.split(',').map(s => s.trim()) : [];
        if (!steps.length) { wrap.hidden = true; return; }
        wrap.hidden = false;

        const mkStep = (id, label) => (
          `<li class="flex items-center gap-2"><span class="inline-block w-[14px] h-[14px] rounded-full border-2 border-current bg-current"></span><a href="#${id}" class="hover:underline">${label}</a></li>`
        );
        const segments = [];
        steps.forEach((id, idx) => {
          const el = $$('#content h2, #content h3').find(h => slug(h.textContent) === id);
          if (el && !el.id) el.id = id;
          const label = labels[idx] || (el?.textContent || id.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()));
          segments.push(mkStep(id, label));
          if (idx !== steps.length - 1) segments.push('<li class="h-[2px] bg-current opacity-35"></li>');
        });
        list.innerHTML = segments.join('');
      })();

      (function searchHL(){
        const input = document.getElementById('search');
        const clearBtn = document.getElementById('clearSearch');
        if (!input || !contentSection) return;
        let originalHTML = '';
        function restore(){ 
          if (originalHTML) {
            contentSection.innerHTML = originalHTML; 
            buildTOC(); // Rebuild TOC to reattach observers
          }
        }
        function highlight(term){
          if (!originalHTML) originalHTML = contentSection.innerHTML;
          restore();
          if (!term) return;
          const esc = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
          const re = new RegExp(`(${esc})(?![^<]*>)`, 'gi');
          contentSection.innerHTML = contentSection.innerHTML.replace(re, '<mark>$1</mark>');
          buildTOC();
        }
        let t; 
        input.addEventListener('input', (e) => { 
          clearTimeout(t); 
          t = setTimeout(() => highlight(e.target.value.trim()), 120); 
        });
        clearBtn?.addEventListener('click', () => { 
          if (input) input.value=''; 
          restore(); 
        });
      })();

      buildTOC();
      try {
        const saved = localStorage.getItem('colorScheme');
        applyTheme(saved && THEME_PACKS[saved] ? saved : 'slate');
      } catch(_){
        applyTheme('slate');
      }
    });
  </script>
</body>
</html>
