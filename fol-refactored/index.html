<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Interactive Course Template</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.tailwindcss.com/3.4.1?plugins=typography"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet"/>

  <style>
    /* Default Theme: Newspaper */
    :root {
      --bg-gradient: #fdfdf8;
      --text: #1c1c1c;
      --accent-text: #8c1c13;
      --nav-bg: #f1f1eb;
      --nav-border: #dcdcd3;
      --nav-text: #1c1c1c;
      --nav-hover-bg: #e5e5dd;
      --nav-active-bg: #dcdcd3;
      --nav-active-text: #1c1c1c;
      --prose-text: var(--text);
      --prose-headings: var(--accent-text);
      --prose-links: var(--accent-text);
      --prose-bold: var(--text);
      font-family: 'Merriweather', serif;
      line-height: 1.6;
    }

    /* Alt themes use Lato */
    .theme-emerald-paper,
    .theme-cyber-blue,
    .theme-emerald-gold {
      font-family: 'Lato', sans-serif;
      line-height: 1.6;
    }

    body {
      background: var(--bg-gradient);
      color: var(--text);
      min-height: 100vh;
    }

    .ui-bg { background-color: var(--nav-bg); }
    .ui-border { border-color: var(--nav-border); }
    .text-primary { color: var(--text); }
    .text-accent { color: var(--accent-text); }
    *:focus-visible { outline: 3px solid var(--accent-text); outline-offset: 2px; border-radius: 2px; }

    .tab-button {
      background-color: var(--nav-bg);
      color: var(--nav-text);
      border-bottom: 3px solid transparent;
      transition: background-color .2s ease, color .2s ease, border-color .2s ease;
    }
    .tab-button:hover,
    .tab-button:focus-visible {
      background-color: var(--nav-hover-bg);
    }
    .tab-button.tab-active {
      background-color: var(--nav-active-bg);
      color: var(--nav-active-text);
      border-bottom-color: var(--accent-text);
      box-shadow: inset 0 -2px 0 0 var(--accent-text);
    }

    .settings-button { background-color: var(--nav-hover-bg); }
    .settings-button:hover { opacity: 0.9; }

    .prose { color: var(--prose-text); }
    .prose h2, .prose h3, .prose a, .prose strong { color: var(--prose-headings); }
    .prose a { text-decoration: underline; text-decoration-color: var(--prose-links); }
    .prose p.lead { color: var(--prose-text); }

    /* Show citations only when not empty */
    .prose .cite { display: none; }
    .prose .cite:not(:empty) {
      display: inline;
      font-size: .75rem;
      color: var(--accent-text);
      vertical-align: super;
      line-height: 0;
    }

    /* Theme variable packs */
    /* Emerald Paper (light) */
    .theme-emerald-paper {
      --bg-gradient: #f7fbf9;
      --text: #1e2b28;
      --accent-text: #0f7f6d;
      --nav-bg: #e7f3ef;
      --nav-border: #86c8ba;
      --nav-text: #1e2b28;
      --nav-hover-bg: #d7ece6;
      --nav-active-bg: #bfe3d9;
      --nav-active-text: #1e2b28;
      --prose-text: #1e2b28;
      --prose-headings: #0f7f6d;
      --prose-links: #0f7f6d;
      --prose-bold: #1e2b28;
    }

    /* Navy (Dark) */
    .theme-cyber-blue {
      --bg-gradient: linear-gradient(135deg,#0a0a23 0%, #141433 50%, #0f172a 100%);
      --text: #e5e7eb;
      --accent-text: #cbd5e1;
      --nav-bg: #0f172a;
      --nav-border: #1f2937;
      --nav-text: #e5e7eb;
      --nav-hover-bg: #111827;
      --nav-active-bg: #1f2937;
      --nav-active-text: #e5e7eb;
      --prose-text: #e5e7eb;
      --prose-headings: #cbd5e1;
      --prose-links: #93c5fd;
      --prose-bold: #e5e7eb;
    }
    .theme-cyber-blue .tab-button.tab-active {
      background-color: #1f2937; /* slate-800 */
      color: #e5e7eb;            /* slate-200 */
      border-bottom-color: #3b82f6; /* blue-500 */
      box-shadow: inset 0 -2px 0 0 #3b82f6;
    }
    .theme-cyber-blue .prose a {
      color: #60a5fa;            /* blue-400 */
      text-decoration-color: #60a5fa;
    }
    .theme-cyber-blue .prose a:hover {
      color: #93c5fd;            /* blue-300 */
      text-decoration-color: #93c5fd;
    }

    /* Emerald/Gold (Dark) */
    .theme-emerald-gold {
      --bg-gradient: linear-gradient(135deg,#022c22 0%,#064e3b 60%,#065f46 100%);
      --text: #ecfdf5;
      --accent-text: #f0c475;
      --nav-bg: #064e3b;
      --nav-border: #d4a24c;
      --nav-text: #ecfdf5;
      --nav-hover-bg: #065f46;
      --nav-active-bg: #0b3d31;
      --nav-active-text: #f0c475;
      --prose-text: #a7f3d0;
      --prose-headings: #f0c475;
      --prose-links: #f0c475;
      --prose-bold: #ecfdf5;
    }

    /* Smooth transitions on theme swap */
    body, .ui-bg, .ui-border, .prose, .prose h2, .prose h3, .prose a, .prose strong, .tab-button {
      transition: color .25s ease, background-color .25s ease, border-color .25s ease;
    }
  </style>
</head>

<body class="transition-colors duration-300 antialiased">
  <div class="container mx-auto px-4 py-6 max-w-7xl">
    <header id="app-header" class="ui-bg border ui-border rounded-lg shadow-lg p-6 mb-6">
      <!-- Injected by JS -->
    </header>

    <nav id="app-tabs" class="ui-bg border ui-border rounded-lg shadow-lg mb-6" role="tablist" aria-label="Main navigation">
      <!-- Injected by JS -->
    </nav>

    <main id="app-panels" class="ui-bg border ui-border rounded-lg shadow-lg p-6 md:p-8">
      <!-- Injected by JS -->
    </main>

    <!-- Theme modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4" role="dialog" aria-modal="true" aria-labelledby="settings-title">
      <div class="ui-bg border ui-border rounded-lg p-6 max-w-md w-full shadow-2xl">
        <h2 id="settings-title" class="text-xl font-bold text-accent mb-4">Display Settings</h2>
        <div class="space-y-4">
          <div>
            <label for="themeSelect" class="block text-primary font-semibold mb-2">Theme</label>
            <select id="themeSelect" class="w-full px-3 py-2 rounded ui-bg border ui-border text-primary"></select>
          </div>
        </div>
        <div class="flex justify-end space-x-3 mt-6">
          <button id="closeSettings" class="px-4 py-2 rounded text-primary hover:opacity-80">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ============================================================
       vvvvvvvvvvvvvv PASTE YOUR JSON CONTENT BELOW vvvvvvvvvvvvvv
       ============================================================ -->
  <script type="application/json" id="app-data">
{
“course”: {
“title”: “N.T. Wright’s Hermeneutic: An Exploration”,
“description”: “An Exploration by Robert Stewart”,
“categories”: {
“introduction”: {
“display_order”: 1,
“display_name”: “Introduction”,
“name”: “Introduction”,
“introduction”: “N. T. Wright is recognized as one of the most prolific and influential New Testament scholars of the late twentieth and early twenty-first centuries. His popularizing of critical scholarship, through works like Jesus and the Victory of God (1996) and The Resurrection of the Son of God (2003), alongside more accessible books like Simply Christian (2006), has shaped both academic and lay conversations about Jesus, Paul, and early Christianity<span class="cite">. Wright’s work, anchored in historical investigation, engages both the academy and the church, insisting that the Gospels tell the true story of Israel’s God becoming king in and through Jesus the Messiah<span class="cite">. Yet his hermeneutical approach—how he understands knowledge, texts, and interpretation—underwrites his historical and theological claims. This overview introduces Wright’s hermeneutic, focusing on his commitment to critical realism, his worldview approach to texts, and his insistence that history and hermeneutics belong together<span class="cite">.”,
“paragraphs”: []
},
“critical-realism”: {
“display_order”: 2,
“display_name”: “Critical Realism”,
“name”: “Critical Realism: A Foundation for Knowledge”,
“introduction”: “At the core of N.T. Wright’s methodology is critical realism<span class="cite">. This philosophical stance attempts to navigate between naïve realism (which claims we can know the world exactly as it is) and postmodern non-realism (which collapses reality into linguistic or conceptual constructs). For Wright, humans can know real things about the world, though always from within our situatedness, through a process of dialogue between the knower and what is known<span class="cite">.”,
“paragraphs”: [
{
“heading”: “Application to History”,
“content”: “Wright applies critical realism to historical inquiry by emphasizing a disciplined imagination that proposes and tests hypotheses about the past<span class="cite">. Historical knowledge is neither a mere assembling of brute facts nor an arbitrary imposition of theory; rather, it involves a mutually corrective interplay between evidence and explanatory narratives. The historian listens to the sources, proposes a big-picture account that makes sense of them, and then submits that account to further scrutiny, criticism, and refinement<span class="cite">.”
}
]
},
“worldview-hermeneutic”: {
“display_order”: 3,
“display_name”: “Worldview Hermeneutic”,
“name”: “Worldview Hermeneutic”,
“introduction”: “Wright argues that texts are best read within the worldviews that produced them<span class="cite">. A worldview, for Wright, includes a community’s basic narratives, symbols, praxis, and answers to fundamental questions. Scripture, as the product of Israel’s and the early church’s worldview, must be interpreted inside that story-shaped frame rather than as isolated proof-texts or timeless propositions detached from history<span class="cite">.”,
“paragraphs”: [
{
“heading”: “The Nature of Texts & Worldviews”,
“content”: “Texts are speech-acts that do things: they inform, command, promise, and evoke a response<span class="cite">. They belong to and reinforce worldviews by telling the community’s story and shaping identity and practice. For biblical texts, this means that Israel’s story (creation, covenant, exile, and restoration) and the early church’s proclamation (Jesus as Israel’s Messiah and the world’s true Lord) provide the interpretive horizon<span class="cite">.”
},
{
“heading”: “The Role of the Reader”,
“content”: “Readers are not neutral. They bring assumptions and agendas; but responsible reading involves entering the text’s own world, allowing it to interrogate and re-form our assumptions<span class="cite">. Wright resists both a purely objectivist reading (that pretends to no perspective) and a purely subjectivist reading (that treats the text as a mirror for the reader’s desires). The goal is a dialogical realism where the text speaks with authority to the church in the present<span class="cite">.”
},
{
“heading”: “What Constitutes a Legitimate Reading?”,
“content”: “A legitimate reading, for Wright, is one that does justice to the text’s historical context, literary shape, and canonical place, and that bears fruit in the life of the church’s worship and mission<span class="cite">. Scripture’s authority is the authority of the Triune God exercised through inspired human writings; faithful interpretation is therefore communal, missional, and ecclesial—not merely private or academic<span class="cite">.”
}
]
},
“hermeneutics-and-history”: {
“display_order”: 4,
“display_name”: “Hermeneutics & History”,
“name”: “Hermeneutics and History”,
“introduction”: “Wright insists that hermeneutics (interpretation) and history belong together<span class="cite">. To read the New Testament truly is to reconstruct what first-century Jews and Christians believed God was doing in and through Jesus, and then to understand how those beliefs and events generated the texts we now read. History without hermeneutics becomes a pile of data; hermeneutics without history drifts into abstraction<span class="cite">.”,
“paragraphs”: [
{
“heading”: “From Event to Meaning: Aims, Intentions, and Motivations”,
“content”: “For Wright, the deepest meaning of history lies in the aims, intentions, and motivations of historical actors, not merely in the external sequence of events<span class="cite">. He makes a key distinction between:\n\n  Aim: The fundamental direction of a person’s life<span class="cite">.\n  Intention: The specific plan through which one pursues that aim in a particular situation<span class="cite">.\n  Motivation: The specific desires, beliefs, or pressures that move one to carry out one’s intent on a given occasion<span class="cite">.\n\nThis framework helps historians move responsibly from event to meaning, recognizing that human actions are embedded in stories and purposes<span class="cite">.”
},
{
“heading”: “The Method: Hypothesis and Verification”,
“content”: “Wright proposes a historical method similar to scientific inquiry: devise a large-scale hypothesis that can in principle explain the available data better than rival accounts, then test it rigorously<span class="cite">. Any good historical hypothesis must meet three criteria:\n\n  It must include all the relevant data: sweeping accounts that conveniently ignore contradictory evidence are suspect<span class="cite">.\n  It must be relatively simple: explanations should not multiply causes beyond what the evidence requires (a form of Ockham’s Razor)<span class="cite">.\n  It must be fruitful: the hypothesis should illuminate puzzles, generate new insights, and out-perform any other competing explanation<span class="cite">.\n\nAll historical knowledge, like any knowledge of the real world, remains provisional; it invites further inquiry and remains open to critique and revision<span class="cite">.”
}
]
},
“conclusion”: {
“display_order”: 5,
“display_name”: “Conclusion”,
“name”: “Conclusion”,
“introduction”: “N. T. Wright’s hermeneutic is a sophisticated attempt to hold together realism about the past with humility about the knower; a thick, story-shaped reading of Scripture with rigorous historical method; and ecclesial authority with scholarly responsibility<span class="cite">. His method combines several powerful tools:\n\n  Critical Realism to guard against both naïve objectivism and radical relativism<span class="cite">.\n  Worldview Hermeneutics to locate texts within the lived stories and practices that generated them<span class="cite">.\n  Historical Hypothesis-Testing to weigh explanations of the data by inclusiveness, simplicity, and fruitfulness<span class="cite">.\n\nWhatever one concludes about particular historical claims, Wright’s hermeneutic is a robust framework for reading Scripture historically, theologically, and ecclesially<span class="cite">.”,
“paragraphs”: []
}
}
}
}

  </script>
  <!-- ============================================================
       ^^^^^^^^^^^^^^ PASTE YOUR JSON CONTENT ABOVE ^^^^^^^^^^^^^^
       ============================================================ -->

  <script defer>
  document.addEventListener('DOMContentLoaded', () => {
    const THEMES = {
      'newspaper':   { name: 'Newspaper',     type: 'variable', isDark: false, class: '' },
      'emerald-paper': { name: 'Emerald Paper', type: 'variable', isDark: false, class: 'theme-emerald-paper' },
      'cyber-blue':    { name: 'Navy (Dark)',   type: 'variable', isDark: true,  class: 'theme-cyber-blue' },
      'emerald-gold':  { name: 'Emerald/Gold',  type: 'variable', isDark: true,  class: 'theme-emerald-gold' }
    };

    const app = {
      root: document.documentElement,
      header: document.getElementById('app-header'),
      tabs: document.getElementById('app-tabs'),
      panels: document.getElementById('app-panels'),
      settings: {
        modal: document.getElementById('settingsModal'),
        closeBtn: document.getElementById('closeSettings'),
        themeSelect: document.getElementById('themeSelect')
      }
    };

    const state = { activeTab: null, theme: 'newspaper' };

    const loadState = () => {
      state.theme = localStorage.getItem('appTheme') || 'newspaper';
      state.activeTab = localStorage.getItem('activeTab');
    };

    const saveState = () => {
      localStorage.setItem('appTheme', state.theme);
      localStorage.setItem('activeTab', state.activeTab);
    };

    const applyTheme = (themeKey) => {
      const theme = THEMES[themeKey];
      if (!theme) return;

      // Reset classes applied to <html> for theme scopes
      app.root.classList.remove('theme-emerald-paper','theme-cyber-blue','theme-emerald-gold');
      if (theme.class) app.root.classList.add(theme.class);

      state.theme = themeKey;
      if (app.settings.themeSelect.value !== themeKey) {
        app.settings.themeSelect.value = themeKey;
      }
      saveState();
    };

    const populateThemeSelector = () => {
      app.settings.themeSelect.innerHTML = Object.entries(THEMES)
        .map(([key, t]) => `<option value="${key}">${t.name}</option>`)
        .join('');
    };

    const loadAndTransformData = () => {
      try {
        const dataNode = document.getElementById('app-data');
        if (!dataNode.textContent.trim()) {
          console.error('JSON data is empty.');
          return null;
        }
        const rawData = JSON.parse(dataNode.textContent);

        const topLevelKey = Object.keys(rawData)[0];
        if (!topLevelKey) {
          console.error('JSON data is missing a top-level key.');
          return null;
        }
        const course = rawData[topLevelKey];

        const units = Object.entries(course.categories || {})
          .map(([id, unitData]) => ({ id, ...unitData }))
          .sort((a, b) => (a.display_order ?? 0) - (b.display_order ?? 0));

        return { meta: { title: course.title, description: course.description }, units };
      } catch (e) {
        console.error('Failed to load or transform app data:', e);
        app.panels.innerHTML =
          `<div class="p-4 text-red-600 bg-red-50 rounded"><strong>Error:</strong> Could not load content. Ensure valid JSON in the data island.</div>`;
        return null;
      }
    };

    const data = loadAndTransformData();
    if (!data) return;

    const isDark = () => THEMES[state.theme]?.isDark;

    const proseClass = () => isDark()
      ? 'prose prose-lg max-w-none prose-invert'
      : 'prose prose-lg max-w-none';

    const renderHeader = () => {
      document.title = data.meta.title || 'Interactive Course';
      app.header.innerHTML = `
        <div class="flex justify-between items-start gap-4">
          <div>
            <h1 class="text-3xl font-bold text-accent">${data.meta.title ?? ''}</h1>
            <p class="mt-2 text-primary/80">${data.meta.description ?? ''}</p>
          </div>
          <button id="settingsBtn" class="flex-shrink-0 p-3 rounded-lg settings-button transition-opacity" aria-label="Display Settings">
            <span class="text-2xl text-accent">⚙️</span>
          </button>
        </div>`;
    };

    const renderTabs = () => {
      const buttons = data.units.map(u => `
        <button role="tab" aria-selected="false" aria-controls="${u.id}-panel" id="${u.id}-tab"
                class="px-5 py-3 font-semibold tab-button">
          ${u.display_name ?? u.name ?? u.id}
        </button>
      `).join('');
      app.tabs.innerHTML = `<div class="flex flex-wrap">${buttons}</div>`;
    };

    const renderPanels = () => {
      app.panels.innerHTML = data.units.map(u => {
        const intro = u.introduction ? `<p class="lead">${u.introduction}</p>` : '';
        const paras = (u.paragraphs || []).map(p => `
          <h3>${p.heading ?? ''}</h3>
          <p>${p.content ?? ''}</p>
        `).join('');

        return `
          <div role="tabpanel" id="${u.id}-panel" aria-labelledby="${u.id}-tab" hidden>
            <div class="${proseClass()}">
              <h2>${u.name ?? u.display_name ?? u.id}</h2>
              ${intro}
              ${paras}
            </div>
          </div>`;
      }).join('');
    };

    const switchTab = (tabId) => {
      if (!data.units.some(u => u.id === tabId)) tabId = data.units[0]?.id;
      if (!tabId) return;

      app.tabs.querySelectorAll('[role="tab"]').forEach(tab => {
        const isActive = tab.id === `${tabId}-tab`;
        tab.setAttribute('aria-selected', isActive);
        tab.classList.toggle('tab-active', isActive);
      });

      app.panels.querySelectorAll('[role="tabpanel"]').forEach(panel => {
        panel.hidden = panel.id !== `${tabId}-panel`;
      });

      state.activeTab = tabId;
      saveState();
    };

    const setupEventListeners = () => {
      app.tabs.addEventListener('click', (e) => {
        const tab = e.target.closest('[role="tab"]');
        if (tab) switchTab(tab.id.replace('-tab', ''));
      });

      app.header.addEventListener('click', (e) => {
        if (e.target.closest('#settingsBtn')) {
          app.settings.modal.classList.remove('hidden');
          app.settings.themeSelect.focus();
        }
      });

      const closeModal = () => {
        app.settings.modal.classList.add('hidden');
        document.getElementById('settingsBtn')?.focus();
      };
      app.settings.closeBtn.addEventListener('click', closeModal);
      app.settings.modal.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeModal();
      });

      app.settings.themeSelect.addEventListener('change', (e) => {
        applyTheme(e.target.value);
        renderPanels();                 // refresh dark/light prose mode
        const activePanel = document.getElementById(`${state.activeTab}-panel`);
        if (activePanel) activePanel.hidden = false;
      });
    };

    const init = () => {
      loadState();
      populateThemeSelector();
      applyTheme(state.theme);
      renderHeader();
      renderTabs();
      renderPanels();
      setupEventListeners();
      switchTab(state.activeTab || data.units[0]?.id);
    };

    init();
  });
  </script>
</body>
</html>

