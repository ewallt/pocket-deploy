<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Behold Your God ‚Äî An Execution (Ch.30) ‚Äî Teaching Kit</title>
<meta name="description" content="Handout + flashcards for Ch.30 'An Execution' ‚Äî Israel takes weapons vs. God's intent." />
<style>
  :root{
    --bg:#0b1020; --panel:#0f172a; --ink:#e5e7eb; --muted:#94a3b8; --brand:#22d3ee;
    --chip:#1f2937; --chip-ink:#cbd5e1; --accent:#38bdf8; --ok:#10b981; --border:#1e293b; --card:#111827; --radius:14px;
  }
  @media (prefers-color-scheme: light){
    :root{ --bg:#f7fafc; --panel:#ffffff; --ink:#0f172a; --muted:#475569; --brand:#0ea5e9; --chip:#eef2ff; --chip-ink:#3730a3; --accent:#2563eb; --border:#e5e7eb; --card:#ffffff; }
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; color:var(--ink);
    background:radial-gradient(1200px 800px at 70% -20%, rgba(56,189,248,.12), transparent 60%), var(--bg);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  a{color:var(--accent); text-decoration:none}
  .wrap{max-width:1000px; margin:0 auto; padding:20px}
  .hdr{position:sticky; top:0; z-index:10; backdrop-filter:saturate(160%) blur(12px); background:color-mix(in oklab, var(--panel) 78%, transparent); border-bottom:1px solid var(--border)}
  .hdr-inner{display:flex; gap:16px; align-items:center; justify-content:space-between; padding:14px 20px}
  .title{display:flex; gap:12px; align-items:center; font-weight:700; letter-spacing:.2px}
  .badge{font-size:12px; padding:2px 8px; border-radius:999px; background:var(--chip); color:var(--chip-ink); border:1px solid var(--border)}
  .tabs{display:flex; gap:8px; flex-wrap:wrap}
  .tab{appearance:none; border:1px solid var(--border); background:var(--panel); color:var(--ink); padding:10px 14px; border-radius:999px; cursor:pointer; font-weight:600}
  .tab[aria-selected="true"]{background:linear-gradient(180deg, color-mix(in oklab, var(--brand) 55%, var(--panel)), var(--panel)); color:#03121a}
  .actions{display:flex; gap:8px; flex-wrap:wrap}
  .btn{appearance:none; border:1px solid var(--border); background:var(--panel); color:var(--ink); padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600}
  .btn:hover{outline:2px solid color-mix(in oklab, var(--brand) 35%, transparent)}
  .panel{background:linear-gradient(180deg, color-mix(in oklab, var(--panel) 86%, transparent), var(--panel)); border:1px solid var(--border); border-radius:var(--radius); padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.08)}
  .section{margin:18px 0}
  h1{font-size:24px; margin:0}
  h2{font-size:18px; margin:20px 0 8px}
  .k{color:var(--muted)}
  ul{margin:8px 0 8px 22px}
  li{margin:6px 0}
  .chips{display:flex; gap:8px; flex-wrap:wrap; margin:8px 0}
  .chip{background:var(--chip); color:var(--chip-ink); border:1px solid var(--border); padding:6px 10px; border-radius:999px; font-size:12px}
  .pill{padding:4px 8px; border-radius:999px; border:1px dashed var(--border)}
  /* Flashcards */
  .fc-wrap{display:grid; gap:16px}
  .fc-toolbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
  .fc{position:relative; border:1px solid var(--border); border-radius:18px; background:var(--card); padding:26px; min-height:220px; perspective:1000px; box-shadow:0 4px 20px rgba(3,7,18,.18)}
  .fc-inner{position:relative; width:100%; height:100%; transform-style:preserve-3d; transition:transform .35s ease}
  .fc.flipped .fc-inner{transform:rotateY(180deg)}
  .fc-side{position:absolute; inset:0; backface-visibility:hidden; display:flex; flex-direction:column; justify-content:center}
  .fc-back{transform:rotateY(180deg)}
  .fc-q{font-size:20px; font-weight:700}
  .fc-a{font-size:17px}
  .fc-foot{position:absolute; bottom:10px; left:16px; right:16px; display:flex; justify-content:space-between; align-items:center; color:var(--muted); font-size:12px}
  .fc-illus{font-size:12px; padding-top:10px; color:var(--muted)}
  @media print{
    body{background:#fff; color:#000}
    .hdr, .actions, .tabs, .app-footer, .fc-wrap, .fc, .fc-toolbar{display:none !important}
    .panel{border:none; box-shadow:none; padding:0}
  }
</style>
</head>
<body>
  <header class="hdr">
    <div class="hdr-inner wrap">
      <div class="title">
        <span style="display:inline-flex; width:10px; height:10px; border-radius:999px; background:var(--brand)"></span>
        <span>Behold Your God</span>
        <span class="badge">Ch.30 ‚Äî An Execution</span>
      </div>
      <nav class="tabs" role="tablist" aria-label="Sections">
        <button class="tab" role="tab" id="t-handout" aria-selected="true" aria-controls="tab-handout">Handout</button>
        <button class="tab" role="tab" id="t-flashcards" aria-selected="false" aria-controls="tab-flashcards">Flashcards</button>
      </nav>
      <div class="actions">
        <button class="btn" id="copyBtn" title="Copy handout to clipboard">Copy Handout</button>
        <button class="btn" id="printBtn" title="Print the handout">Print</button>
        <a class="btn" href="https://github.com/ewallt/pocket-deploy/new/gh-pages?filename=byg-an-execution/index.html" target="_blank" rel="noopener">GitHub Placeholder</a>
      </div>
    </div>
  </header>

  <main class="wrap" id="app">
    <!-- Handout -->
    <section id="tab-handout" class="panel tab-panel" role="tabpanel" aria-labelledby="t-handout">
      <div class="handout-root" id="handout"></div>
    </section>

    <!-- Flashcards -->
    <section id="tab-flashcards" class="panel tab-panel" role="tabpanel" aria-labelledby="t-flashcards" hidden>
      <div class="fc-wrap">
        <div class="fc-toolbar">
          <button class="btn" id="flipBtn">Flip</button>
          <button class="btn" id="prevBtn">Prev</button>
          <button class="btn" id="nextBtn">Next</button>
          <button class="btn" id="shuffleBtn">Shuffle</button>
          <label style="display:inline-flex; align-items:center; gap:6px" title="Remember card order & position">
            <input type="checkbox" id="remember" />
            Remember progress
          </label>
          <span id="progress" class="pill"></span>
        </div>

        <article class="fc" id="card">
          <div class="fc-inner">
            <div class="fc-side fc-front">
              <div class="fc-q" id="qText"></div>
              <div class="fc-illus" id="illusFront"></div>
              <div class="fc-foot"><span id="pageFront"></span><span>Tap Flip or press Space</span></div>
            </div>
            <div class="fc-side fc-back">
              <div class="fc-a" id="aText"></div>
              <div class="fc-illus" id="illusBack"></div>
              <div class="fc-foot"><span id="pageBack"></span><span>Tap Next or ‚Üê / ‚Üí</span></div>
            </div>
          </div>
        </article>
      </div>
    </section>
  </main>

  <footer class="wrap app-footer">
    <hr style="border:none; height:1px; background:var(--border); margin:18px 0" />
    <div>Single-file app ‚Ä¢ System fonts ‚Ä¢ No external dependencies.</div>
  </footer>

<script>
/* ------------------ DATA (from Ch.30) ------------------ */
const HANDOUT_HTML = `
  <h1>‚ÄúAn Execution‚Äù (Ch.30) ‚Äî Teaching Handout</h1>
  <div class="chips">
    <span class="chip">Theme: Israel takes up the sword</span>
    <span class="chip">Key idea: God did not arm them; they armed themselves</span>
    <span class="chip">Principles: Trust vs. Self-reliance ‚Ä¢ Accommodation</span>
  </div>

  <div class="section">
    <h2>Thesis</h2>
    <p class="k">
      God led Israel out ‚Äú<em>unarmed, and unaccustomed to war</em>.‚Äù He did not intend them to gain the land by warfare.
      After the Red Sea, the armor of Egypt washed ashore‚ÄîIsrael chose to arm themselves. That choice replaced God‚Äôs protective
      government with human self-defense and distorted their witness.
    </p>
  </div>

  <div class="section">
    <h2>Key Textual Moments</h2>
    <ul>
      <li><strong>Exit intent:</strong> Egypt‚Äôs goods supplied‚Äîbut <em>no weapons</em> (pointed absence). (pp. 475‚Äì476)</li>
      <li><strong>Red Sea test:</strong> Egyptian armor at their feet; trust God or take the sword. (pp. 479‚Äì480)</li>
      <li><strong>Inference from events:</strong> Soon after, Israel fights Amalek with weapons ‚Üí implies they armed from the shoreline spoils. (p. 479)</li>
    </ul>
  </div>

  <div class="section">
    <h2>Lessons the Author Draws</h2>
    <ul>
      <li><strong>Departure from God‚Äôs order:</strong> Taking weapons was a decisive turn from reliance on God‚Äôs protection. (pp. 479‚Äì480)</li>
      <li><strong>Heightened accountability:</strong> Doing this <em>immediately after</em> God‚Äôs mighty deliverance was ‚Äútotally inexcusable.‚Äù (p. 480)</li>
      <li><strong>Consequences:</strong> Introduced a new order; misrepresented God‚Äôs character; set a trajectory toward eventual rejection. (pp. 479‚Äì480)</li>
      <li><strong>Refutation of rationalization:</strong> It‚Äôs false that God wanted them to ‚Äúgrow into‚Äù war; He never commanded ‚Äúgo up and fight.‚Äù (p. 480)</li>
      <li><strong>Accommodation angle:</strong> Once armed, God gave <em>harm-limiting</em> counsel (as a Saviour), without endorsing war. (pp. 484‚Äì486, 525‚Äì533)</li>
    </ul>
  </div>

  <div class="section">
    <h2>Reading Cues</h2>
    <ul>
      <li>Look for <strong>absence</strong> (what God <em>doesn‚Äôt</em> provide) as meaningful.</li>
      <li>Trace the <strong>sequence</strong>: Witness ‚Üí Test ‚Üí Choice ‚Üí Consequence.</li>
      <li>Distinguish <strong>concession</strong> from <strong>endorsement</strong> in later commands.</li>
    </ul>
  </div>

  <div class="section">
    <h2>Discussion Prompts</h2>
    <ul>
      <li>How does the ‚Äúno weapons provided‚Äù signal God‚Äôs ideal?</li>
      <li>Why is the Red Sea moment a decisive ‚Äúexam‚Äù of trust?</li>
      <li>Where do we see accommodation (harm-limiting guidance) after Israel‚Äôs choice?</li>
    </ul>
  </div>
`;

const CARDS = [
  { q:"What is the chapter‚Äôs thesis in one line?", a:"God did not arm Israel; after the Red Sea they armed themselves, choosing self-defense over divine protection.", page:"p. 475‚Äì480", illus:"[üõ°Ô∏è vs ‚öîÔ∏è]" },
  { q:"What did God conspicuously <em>not</em> provide when Israel left Egypt?", a:"Weapons; they went out unarmed and unaccustomed to war.", page:"p. 475‚Äì476", illus:"[üì¶ ‚úì | ‚öîÔ∏è ‚úó]" },
  { q:"What was the Red Sea ‚Äòexam‚Äô?", a:"Egyptian armor washed ashore‚Äîtrust God or take the sword.", page:"p. 479", illus:"[üåä‚Üíüõ°Ô∏è/‚öîÔ∏è]" },
  { q:"How do we infer they armed themselves?", a:"Soon after they fought Amalek with weapons‚Äîno smiths in between; implies shoreline salvage.", page:"p. 479", illus:"[üó°Ô∏è provenance]" },
  { q:"Why is taking arms called ‚Äòinexcusable‚Äô here?", a:"Because it came immediately after God‚Äôs dramatic salvation.", page:"p. 480", illus:"[‚è±Ô∏è right-after]" },
  { q:"Name one consequence of taking the sword.", a:"They replaced God‚Äôs order with human government and misrepresented His character.", page:"p. 479‚Äì480", illus:"[üèïÔ∏è order shift]" },
  { q:"What rationalization does the author reject?", a:"That God meant them to ‚Äògrow into‚Äô war and conveniently supplied armor.", page:"p. 480", illus:"[üß© false rationale]" },
  { q:"What does the author cite about God‚Äôs intent for conquest?", a:"‚ÄúThe Lord had never commanded them to ‚Äògo up and fight.‚Äô‚Äù", page:"p. 480", illus:"[üìú intent]" },
  { q:"How does accommodation apply after they arm?", a:"God offers harm-limiting counsel without endorsing warfare; concession ‚â† endorsement.", page:"p. 484‚Äì486; 525‚Äì533", illus:"[‚ù§Ô∏è‚Äçü©π accommodate]" },
  { q:"Practical reader cue?", a:"Treat absence (no weapons provided) and sequence (witness‚Üítest‚Üíchoice‚Üíconsequence) as interpretive signals.", page:"p. 475‚Äì480", illus:"[üß≠ cues]" }
];

/* ------------------ Tabs ------------------ */
const tabs = {
  handout: { tabBtn: document.getElementById('t-handout'), panel: document.getElementById('tab-handout') },
  flash:   { tabBtn: document.getElementById('t-flashcards'), panel: document.getElementById('tab-flashcards') }
};
function showTab(which){
  for(const k of Object.keys(tabs)){
    const active = (k === which);
    tabs[k].tabBtn.setAttribute('aria-selected', active ? 'true' : 'false');
    tabs[k].panel.hidden = !active;
  }
}
tabs.handout.tabBtn.addEventListener('click', ()=>showTab('handout'));
tabs.flash.tabBtn.addEventListener('click', ()=>showTab('flash'));

/* ------------------ Copy & Print ------------------ */
document.getElementById('copyBtn').addEventListener('click', async () => {
  const handout = document.querySelector('#tab-handout .handout-root');
  const text = handout.innerText.replace(/\n{3,}/g, '\n\n').trim();
  try{
    await navigator.clipboard.writeText(text);
    toast('Handout copied to clipboard.');
  }catch(e){
    const ta = document.createElement('textarea');
    ta.value = text; ta.style.position='fixed'; ta.style.opacity='0'; document.body.appendChild(ta);
    ta.focus(); ta.select();
    try{ document.execCommand('copy'); toast('Handout copied to clipboard.'); }catch(e2){ toast('Select & copy manually.'); }
    ta.remove();
  }
});
document.getElementById('printBtn').addEventListener('click', () => window.print());
function toast(msg){
  const n = document.createElement('div');
  n.textContent = msg;
  n.style.position='fixed'; n.style.bottom='18px'; n.style.left='50%'; n.style.transform='translateX(-50%)';
  n.style.background='var(--panel)'; n.style.color='var(--ink)'; n.style.border='1px solid var(--border)';
  n.style.padding='10px 14px'; n.style.borderRadius='10px';
  n.style.boxShadow = '0 6px 20px rgba(0,0,0,.18)';
  document.body.appendChild(n); setTimeout(()=>n.remove(), 1800);
}

/* ------------------ Handout inject ------------------ */
document.getElementById('handout').innerHTML = HANDOUT_HTML;

/* ------------------ Flashcards ------------------ */
const cardEl = document.getElementById('card');
const qEl = document.getElementById('qText');
const aEl = document.getElementById('aText');
const pageFront = document.getElementById('pageFront');
const pageBack  = document.getElementById('pageBack');
const illusF = document.getElementById('illusFront');
const illusB = document.getElementById('illusBack');
const progress = document.getElementById('progress');
const remember = document.getElementById('remember');

const LS_KEY = 'byg-an-execution-fc-v1';
let order = [...CARDS.keys()];
let idx = 0;
let flipped = false;

function loadLS(){
  const saved = localStorage.getItem(LS_KEY);
  if(!saved) return;
  try{
    const {order:o, idx:i, remember:r} = JSON.parse(saved);
    if(Array.isArray(o) && o.length === CARDS.length){ order = o.slice(); }
    if(typeof i === 'number') idx = Math.min(Math.max(0,i), CARDS.length-1);
    remember.checked = !!r;
  }catch{}
}
function saveLS(){
  if(!remember.checked) return;
  localStorage.setItem(LS_KEY, JSON.stringify({order, idx, remember:true}));
}
function clearLS(){ localStorage.removeItem(LS_KEY); }

function currentCard(){ return CARDS[ order[idx] ]; }
function renderCard(){
  const c = currentCard();
  qEl.innerHTML = c.q;      /* allow <em> in prompt */
  aEl.textContent = c.a;
  pageFront.textContent = c.page || '';
  pageBack.textContent  = c.page || '';
  illusF.textContent = c.illus || '';
  illusB.textContent = c.illus || '';
  progress.textContent = `Card ${idx+1} / ${CARDS.length}`;
  cardEl.classList.toggle('flipped', flipped);
  saveLS();
}
function flip(){ flipped = !flipped; renderCard(); }
function next(){ idx = (idx+1) % CARDS.length; flipped = false; renderCard(); }
function prev(){ idx = (idx-1+CARDS.length) % CARDS.length; flipped = false; renderCard(); }
function shuffle(){
  for(let i = order.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [order[i], order[j]] = [order[j], order[i]];
  }
  idx = 0; flipped = false; renderCard(); toast('Shuffled.');
}

document.getElementById('flipBtn').addEventListener('click', flip);
document.getElementById('nextBtn').addEventListener('click', next);
document.getElementById('prevBtn').addEventListener('click', prev);
document.getElementById('shuffleBtn').addEventListener('click', shuffle);
remember.addEventListener('change', ()=>{ if(!remember.checked) clearLS(); saveLS(); });

document.addEventListener('keydown', (e)=>{
  const flashActive = document.getElementById('t-flashcards').getAttribute('aria-selected') === 'true';
  if(!flashActive) return;
  if(e.key === ' '){ e.preventDefault(); flip(); }
  if(e.key === 'ArrowRight'){ next(); }
  if(e.key === 'ArrowLeft'){ prev(); }
});

/* Init */
loadLS(); renderCard();
</script>
</body>
</html>
