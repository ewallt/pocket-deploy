<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Minds of the Many</title>
  <!-- Tailwind + typography -->
  <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
  <script>tailwind.config = { darkMode: 'class' }</script>
  <!-- Optional BLB tagger (safe to leave in) -->
  <script src="https://www.blueletterbible.org/scripts/blbToolTip/BLB_ScriptTagger-min.js"></script>
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
  <style>
    /* Typography */
    .font-newspaper{font-family:'Lora',serif}
    .font-dark-theme{font-family:'Lora',serif}
    body{transition:background .3s,color .3s}
    .prose h1{min-height:7.5rem}

    /* --- Classic Themes (Original) --- */
    .newspaper-theme{background:#fdfdfd;color:#1a1a1a}
    .newspaper-theme .nav-button{background:#f8f9fa;border:1px solid #dee2e6;color:#212529}
    .newspaper-theme .nav-button:hover{background:#e9ecef}
    .newspaper-theme .nav-button.active{background:#1a1a1a;color:#fdfdfd}

    .dark-theme{background:#2d2d30;color:#fff}
    .dark-theme .nav-button{background:#3c3c3c;border:1px solid #4a4a4a;color:#ccc}
    .dark-theme .nav-button:hover{background:#4a4a4a}
    .dark-theme .nav-button.active{background:#fff;color:#2d2d30}

    .nav-button:focus-visible{outline:2px solid var(--nav-border);outline-offset:2px}
    .variable-theme .prose a{color:var(--accent-text);text-underline-offset:2px}

    
    /* --- New Variable-Based Theme Engine --- */
    :root {
        --bg-gradient: #fdfdfd;
        --text: #1a1a1a;
        --accent-text: #1a1a1a;
        --nav-bg: #f8f9fa;
        --nav-border: #dee2e6;
        --nav-text: #212529;
        --nav-hover-bg: #e9ecef;
        --nav-active-bg: #1a1a1a;
        --nav-active-text: #fdfdfd;
    }
    
    .variable-theme {
        background: var(--bg-gradient);
        color: var(--text);
        font-family: 'Lora', serif;
    }
    .variable-theme .prose h1,
    .variable-theme .prose h2,
    .variable-theme .prose h3 {
        color: var(--accent-text);
    }
    .variable-theme .nav-button {
        background-color: var(--nav-bg);
        border: 1px solid var(--nav-border);
        color: var(--nav-text);
    }
    .variable-theme .nav-button:hover {
        background-color: var(--nav-hover-bg);
    }
    .variable-theme .nav-button.active {
        background-color: var(--nav-active-bg);
        color: var(--nav-active-text);
    }
    .variable-theme .nav-button.btn-dark-text.active,
    .variable-theme .nav-button.btn-dark-text:hover {
        color: var(--nav-active-text);
    }
    .variable-theme .nav-button.btn-light-text.active,
    .variable-theme .nav-button.btn-light-text:hover {
        color: var(--nav-active-text);
    }

    /* --- Shared & Modal Styles --- */
    .nav-container{margin-bottom:2rem}
    .nav-button{padding:.5rem 1rem;margin:.5rem .5rem .5rem 0;border-radius:.375rem;transition:all .2s;cursor:pointer}
    #library-switcher,#topic-switcher{padding:.5rem;border-radius:.375rem;margin-bottom:1rem;width:100%;border:1px solid #ccc}
    .nav-buttons-wrapper{display:flex;flex-wrap:wrap;align-items:center;width:100%}
    .flex-break{flex-basis:100%;height:0}

    .modal-overlay {
        display: none; position: fixed; z-index: 1000; left: 0; top: 0;
        width: 100%; height: 100%;
        background-color: rgba(0,0,0,0.6);
        justify-content: center; align-items: center;
    }
    .modal-overlay.show { display: flex; }
    .modal-content {
        background: #fff; color: #2d2d30; padding: 2rem; border-radius: 8px;
        text-align: center; position: relative; width: 90%; max-width: 400px;
    }
    .dark .modal-content { background: #2d2d30; color: #fff; }
    .modal-content h3 { font-size: 1.5rem; margin-bottom: 1.5rem; }
    .modal-content label { font-size: 1.1rem; margin-right: 10px; }
    #theme-select {
        background-color: #f0f0f0; color: #2d2d30;
        border: 1px solid #ccc; border-radius: 5px; padding: 8px; font-size: 1rem;
    }
    .dark #theme-select {
        background-color: #3c3c3c; color: #fff; border-color: #4a4a4a;
    }
    .close-btn {
        position: absolute; top: 10px; right: 15px; color: #aaa;
        font-size: 28px; font-weight: bold; background: none;
        border: none; cursor: pointer;
    }
  </style>
</head>
<body class="font-newspaper newspaper-theme">

  <script id="embedded-content" type="application/json">
    {
      "minds-of-the-many": {
        "display_order": 10,
        "title": "Minds of the Many",
        "description": "Profiles of the pioneers and key figures who shaped our understanding of collective intelligence.",
        "categories": {
          "james-surowiecki": {
            "display_order": 10,
            "name": "James Surowiecki: The Synthesizer",
            "display_name": "Surowiecki",
            "introduction": "In 2004, New Yorker columnist James Surowiecki published *The Wisdom of Crowds*, a book that synthesized decades of disparate research into a single, powerful idea. He wasn't the first to observe the phenomenon, but he was the first to give it a name and a clear framework, popularizing the concept of collective intelligence for a mass audience and shaping the business and technology discourse for years to come.",
            "paragraphs": [
              {
                "heading": "The Core Insight",
                "content": "Surowiecki's central argument is both simple and profound: under the right conditions, <strong>groups are remarkably intelligent</strong>, and are often smarter than the smartest people in them. This intelligence is not a matter of consensus or compromise. Rather, it emerges from the mathematical aggregation of individual judgments, which tends to cancel out random errors and biases, leaving a signal that is surprisingly close to the truth. The group's judgment is a new piece of information that may not be held by any single member."
              },
              {
                "heading": "The Four Conditions",
                "content": "The book's most enduring contribution is its clear articulation of the four conditions necessary for a crowd to be wise. First is <strong>diversity of opinion</strong>; each person should have some private information, even if it's just an eccentric interpretation of known facts. Second is <strong>independence</strong>; people's opinions aren't determined by the opinions of those around them. Third is <strong>decentralization</strong>; people are able to specialize and draw on local knowledge. Finally, there must be a mechanism for <strong>aggregation</strong>, a way of turning private judgments into a collective decision."
              },
              {
                "heading": "Cognition, Coordination, and Cooperation",
                "content": "Surowiecki masterfully categorizes the types of problems crowds can solve. <strong>Cognition problems</strong> are those with a definitive solution, like guessing the weight of an ox or determining the location of a lost submarine. <strong>Coordination problems</strong> require members of a group to coordinate their behavior with each other, knowing that everyone else is trying to do the same, such as avoiding collisions in pedestrian traffic. Lastly, <strong>Cooperation problems</strong> involve the challenge of getting self-interested individuals to work together for the common good, overcoming the temptation to free-ride on the efforts of others, as seen in maintaining a clean public park."
              },
              {
                "heading": "The Limits of Crowds",
                "content": "Surowiecki is careful to note when wisdom fails. When the conditions are not met, the crowd's intelligence collapses into madness. If a group lacks diversity and becomes too homogenous, its members are more likely to make the same mistakes. If individuals are not independent but are instead swayed by emotion or social pressure, they can create <strong>information cascades and speculative bubbles</strong>. His analysis of market crashes and groupthink serves as a crucial warning that collective intelligence is a conditional phenomenon, not an inevitable one."
              },
              {
                "heading": "A New Lens on the World",
                "content": "Ultimately, Surowiecki's work provided a powerful new lens for understanding the world. It showed that the anonymous, chaotic-seeming interactions of markets, voters, and even online communities were, in fact, sophisticated systems for processing information. By giving managers, policymakers, and technologists a clear framework, he didn't just write a book; he provided a <strong>shared vocabulary and a practical toolkit</strong> for harnessing the incredible power of collective thought."
              }
            ]
          },
          "francis-galton": {
            "display_order": 20,
            "name": "Francis Galton: The Surprising Ox",
            "display_name": "Galton",
            "introduction": "Sir Francis Galton (1822-1911) was a Victorian polymath obsessed with measurement and human variation. A cousin of Charles Darwin, he was a proponent of eugenics and a firm believer in the superiority of experts. It is a deep irony of history, then, that he is responsible for the foundational anecdote in the study of collective intelligence—an observation that directly challenged his own elitist beliefs.",
            "paragraphs": [
              {
                "heading": "An Unexpected Result",
                "content": "The story begins in 1906 at the West of England Fat Stock and Poultry Exhibition. A fat ox was on display, and attendees were invited to guess the animal's 'dressed' weight (after slaughter and butchering) for a prize. Galton, ever the data collector, obtained all 787 of the submitted tickets. He expected to find that the average guess would be wildly inaccurate, proving the foolishness of the common person. He was setting out to demonstrate the <strong>'stupidity of the mob'</strong>."
              },
              {
                "heading": "The Power of Averages",
                "content": "Galton arranged the guesses in order from highest to lowest and calculated the median guess—the value that split the group in half. The median was 1,207 pounds. He then calculated the mean, or average, of all 787 guesses. The average was 1,197 pounds. After the ox was slaughtered and prepared, its actual dressed weight was revealed: <strong>1,198 pounds</strong>. The crowd's collective judgment was, for all practical purposes, perfect. It was more accurate than the guesses of any of the individual cattle experts at the fair."
              },
              {
                "heading": "Galton's Reluctant Realization",
                "content": "The result shocked Galton. He wrote about his findings in a now-famous letter to the journal *Nature*, titled \"Vox Populi\" (The Voice of the People). He noted that the result was \"more creditable to the trustworthiness of a democratic judgment than might have been expected.\" The key, he realized, was that the individual errors cancelled each other out. For every person who wildly overestimated the weight, there was likely another who underestimated it by a similar amount. The <strong>random errors on either side of the truth balanced out</strong>, leaving a signal of pure wisdom."
              },
              {
                "heading": "The Seeds of a Science",
                "content": "Galton's experiment inadvertently laid the groundwork for a science of collective intelligence. It provided the first clean, empirical demonstration that a group of non-experts could produce a judgment of superior quality without any deliberation or central coordination. The only requirements were that each person form an <strong>independent judgment</strong> and that there be a mechanism to aggregate those judgments. It was a purely statistical phenomenon, a kind of magic that emerged from the simple act of averaging."
              },
              {
                "heading": "Legacy of the Ox",
                "content": "The story of Galton and the ox has become the founding parable of the wisdom of crowds. It is cited in nearly every work on the subject because it perfectly illustrates the core principle in a simple, memorable way. It demonstrates that collective intelligence does not require every member of the group to be brilliant. It only requires a <strong>diverse set of independent thinkers</strong> whose collective input can be aggregated. It's a powerful and democratic idea, made all the more potent by the fact that it was discovered by a man who expected to prove the very opposite."
              }
            ]
          },
          "marquis-de-condorcet": {
            "display_order": 30,
            "name": "Marquis de Condorcet: The Jury Theorem",
            "display_name": "Condorcet",
            "introduction": "The Marquis de Condorcet (1743-1794) was a French philosopher, mathematician, and political scientist who championed the ideals of the Enlightenment. Living through the turbulence of the French Revolution, he sought to apply the logic of mathematics to the problems of social and political life. In doing so, he developed the first formal mathematical proof of why democracy, under the right conditions, should work: the Condorcet Jury Theorem.",
            "paragraphs": [
              {
                "heading": "The Jury Theorem Explained",
                "content": "Condorcet's theorem is an elegant piece of mathematical reasoning about group decision-making. Imagine a jury trying to determine a defendant's guilt or innocence—a question with a correct answer. The theorem states that if each individual juror has a <strong>better than 50% chance</strong> of being correct, and they all vote independently, then the probability of the majority reaching the correct verdict increases as you add more jurors. With enough voters, the group's accuracy approaches <strong>100% certainty</strong>."
              },
              {
                "heading": "The Critical Assumptions",
                "content": "The theorem's power hinges on two critical assumptions. The first is <strong>voter competence</strong>: each individual must be more likely to be right than wrong. A group of coin-flippers will not become wise. The second, and more crucial, assumption is <strong>independence</strong>. Each voter must make up their own mind and not be influenced by the votes of others. If people simply follow the most charismatic speaker or copy their neighbors, the mathematical magic of aggregation disappears, as the errors no longer become independent and fail to cancel out."
              },
              {
                "heading": "The Dark Side of the Theorem",
                "content": "Condorcet also identified a chilling corollary. If the average voter is <strong>less likely</strong> to be correct than a coin flip (i.e., they have less than a 50% chance of being right), then adding more voters actually drives the group's accuracy toward zero. A large group of misinformed people is almost guaranteed to choose the wrong answer. This provides a stark mathematical warning about the dangers of widespread misinformation or propaganda in a democracy. A wise crowd requires at least a baseline of individual competence."
              },
              {
                "heading": "From Juries to Electorates",
                "content": "While framed around juries, Condorcet intended his theorem to apply to democratic elections more broadly. It provides a powerful theoretical justification for why the aggregated votes of millions of citizens could produce better governance than the decree of a single king or a small council of aristocrats. It suggests that democracy is not just a system for representing preferences, but also a <strong>mechanism for discovering truth</strong> and making objectively better decisions over time."
              },
              {
                "heading": "Condorcet's Paradox",
                "content": "Condorcet also identified a famous problem in voting theory now named after him: the Condorcet Paradox. He showed that when there are three or more options, it's possible for collective preferences to be circular. A majority might prefer Candidate A over B, a majority might prefer B over C, and yet another majority might prefer C over A. This demonstrates that even with rational individuals, there is no guarantee of a single, stable collective preference, highlighting the complexities of aggregating choices beyond a simple binary decision."
              }
            ]
          },
          "scott-page": {
            "display_order": 40,
            "name": "Scott Page: The Diversity Bonus",
            "display_name": "Page",
            "introduction": "Scott Page, a professor of complex systems, political science, and economics at the University of Michigan, has provided some of the most rigorous and surprising insights into *why* diverse groups are so smart. Moving beyond intuition, Page uses mathematical models and computational experiments to prove that when it comes to problem-solving, cognitive diversity isn't just a social good—it's a strategic advantage that he calls the 'Diversity Bonus.'",
            "paragraphs": [
              {
                "heading": "Beyond Individual Ability",
                "content": "Page's central finding is that a group's collective intelligence is a function of both individual ability and diversity. Critically, he shows that <strong>diversity often matters more than ability</strong>. His most famous theorem, the \"Diversity Trumps Ability Theorem,\" states that a randomly selected collection of problem solvers with diverse approaches can outperform a collection of the best-performing problem solvers who think alike. The best individuals often get stuck in the same places, while a diverse group brings different tools to the problem, allowing them to find solutions the experts miss."
              },
              {
                "heading": "Cognitive vs. Identity Diversity",
                "content": "Page makes a crucial distinction between identity diversity (differences in race, gender, age, etc.) and cognitive diversity (differences in how people see and solve problems). Cognitive diversity includes differences in <strong>perspectives, interpretations, heuristics, and predictive models</strong>. While he acknowledges that identity diversity is often a valuable proxy for cognitive diversity, his focus is on the underlying differences in thinking. The true 'bonus' comes from bringing together people who approach problems from fundamentally different angles."
              },
              {
                "heading": "The Power of Different Perspectives",
                "content": "Imagine a group of people trying to find the highest point on a rugged landscape. A group of brilliant but similar-thinking mountaineers might all climb the same, most obvious peak. However, a more diverse group—containing a mountaineer, a geologist who understands the underlying rock formations, and a pilot with an aerial view—is more likely to find the true highest point because they are not all starting from the same place. Page's models show that <strong>diversity in perspective prevents groups from getting stuck on suboptimal solutions</strong>."
              },
              {
                "heading": "The Netflix Prize Example",
                "content": "Page often cites the Netflix Prize, a competition to improve the company's movie recommendation algorithm, as a real-world example. The winning teams were not those with a single, brilliant algorithm but were <strong>ensembles of different models</strong>. The final breakthrough came when multiple top teams realized that by combining their very different algorithms, they could improve accuracy beyond what any single approach could achieve. The diversity of their predictive models was the key to victory, perfectly illustrating the Diversity Bonus."
              },
              {
                "heading": "Building Smarter Teams",
                "content": "The practical implications of Page's work are enormous. It suggests that organizations seeking to solve complex problems should prioritize building teams with high cognitive diversity. This means intentionally hiring people with different training, backgrounds, and problem-solving styles. It reframes diversity not as a matter of political correctness or representation, but as a <strong>fundamental component of high-performance and innovation</strong>. For any complex challenge, from designing a new product to formulating public policy, a diverse crowd is an invaluable asset."
              }
            ]
          },
          "robin-hanson": {
            "display_order": 50,
            "name": "Robin Hanson: The Idea Markets",
            "display_name": "Hanson",
            "introduction": "Robin Hanson, an associate professor of economics at George Mason University, is the intellectual father of prediction markets—speculative markets created for the purpose of making predictions. For decades, he has been the most forceful and imaginative advocate for using market mechanisms to aggregate information and improve collective decision-making, culminating in his radical proposal for a new form of government he calls 'futarchy.'",
            "paragraphs": [
              {
                "heading": "From Academia to Idea Markets",
                "content": "Hanson's work stems from a deep faith in the information-aggregating power of markets. He observed that financial markets, while designed for allocating capital, are also incredibly effective at forecasting future events, from corporate earnings to geopolitical risk. He proposed creating 'idea markets' or 'decision markets' that would be designed explicitly for this purpose. In these markets, people would not trade stocks, but contracts based on the <strong>outcome of future events</strong>, such as 'Will this project be completed on time?' or 'Will this new drug receive FDA approval?'"
              },
              {
                "heading": "How Prediction Markets Work",
                "content": "The mechanism is simple but powerful. A contract is created that will pay out $1 if a specific event happens and $0 if it does not. Traders then buy and sell this contract. The market price of that contract, which can range from $0 to $1, can be interpreted as the <strong>market's collective estimate of the probability</strong> of that event occurring. A price of $0.65 implies the crowd believes there is a 65% chance of the event happening. These markets provide a single, real-time, continuously updated forecast that reflects the aggregated knowledge of all participants."
              },
              {
                "heading": "The Concept of Futarchy",
                "content": "Hanson's most provocative idea is futarchy, a system of government based on the principle of 'vote on values, bet on beliefs.' In this system, citizens would vote to define what national goals we value (e.g., maximizing GDP, reducing carbon emissions). Then, prediction markets would be used to determine which proposed policies would be most effective at achieving those stated goals. The policy that the market predicts will best achieve the valued outcome would be automatically implemented. This system would, in theory, separate disagreements about goals from disagreements about facts, letting us use our best mechanism—markets—to <strong>settle factual disputes about policy consequences</strong>."
              },
              {
                "heading": "Overcoming Bias and Cheap Talk",
                "content": "A key advantage of prediction markets is their ability to overcome cognitive biases and political posturing. Unlike polls or expert panels where expressing an opinion is cheap, prediction markets force participants to <strong>'put your money where your mouth is.'</strong> This incentivizes traders to be as accurate as possible and disincentivizes wishful thinking or political grandstanding. The profit motive encourages people with better information to participate and corrects the errors of those with poor information, creating a powerful mechanism for filtering signal from noise."
              },
              {
                "heading": "Applications and Challenges",
                "content": "While futarchy remains a theoretical concept, prediction markets have been successfully used by companies like Google and HP to forecast product sales and project deadlines. They have consistently outperformed traditional polls in predicting election outcomes. However, they also face challenges, including the potential for manipulation, the need for liquidity (enough traders to make the market work), and ethical questions about creating markets on sensitive topics like terrorist attacks or assassinations. Despite these hurdles, Hanson's work continues to inspire new ways of thinking about how we can <strong>harness financial incentives to create collective wisdom</strong>."
              }
            ]
          },
          "linus-torvalds": {
            "display_order": 60,
            "name": "Linus Torvalds: The Benevolent Dictator",
            "display_name": "Torvalds",
            "introduction": "In 1991, a Finnish student named Linus Torvalds posted a message announcing a 'hobby' operating system he was working on. That hobby evolved into Linux, the open-source kernel that now powers the majority of the world's servers, all Android phones, and countless other devices. The story of Linux is a landmark in collective intelligence, but it showcases a different model: one guided by a trusted central figure, the 'Benevolent Dictator for Life' (BDFL).",
            "paragraphs": [
              {
                "heading": "The Kernel of an Idea",
                "content": "Torvalds' genius was not just in writing the initial code, but in his decision to release it openly on the internet and invite others to contribute. He established a process where any developer from anywhere in the world could submit patches and improvements. This decentralized innovation, allowing thousands of minds to tackle different parts of the problem simultaneously. The project grew from a single person's hobby into a <strong>massive, distributed collaboration</strong> that no single company could have orchestrated."
              },
              {
                "heading": "\"Given enough eyeballs, all bugs are shallow\"",
                "content": "This famous aphorism, coined by open-source advocate Eric S. Raymond in his essay *The Cathedral and the Bazaar*, perfectly captures the Linux development philosophy. It's a statement about the power of transparency and parallel debugging. When code is open for anyone to inspect, it's far more likely that someone, somewhere, will spot a given flaw. A single expert might miss a bug, but a <strong>crowd of diverse observers, each with a different perspective, will eventually find everything</strong>. This principle of radical transparency is a cornerstone of open-source success."
              },
              {
                "heading": "The Benevolent Dictator Model",
                "content": "Unlike the flat, consensus-driven model of Wikipedia, the Linux project has a clear hierarchy. While anyone can contribute, the ultimate decision-making power rests with Linus Torvalds. He and his trusted lieutenants decide which code submissions are merged into the official kernel. This model provides a solution to the aggregation problem. It combines the <strong>bottom-up idea generation of a diverse crowd</strong> with the <strong>top-down quality control and coherent vision</strong> of a single, trusted leader. It prevents the project from descending into chaos or splintering into factions, providing a crucial element of stability."
              },
              {
                "heading": "Git: A Tool for Crowds",
                "content": "Frustrated with existing version control systems, Torvalds created another revolutionary tool: Git. Git is a distributed version control system designed specifically to manage the complex, non-linear workflow of the Linux kernel. It allows thousands of developers to work in parallel on their own 'branches' of the code and then provides a robust mechanism for merging those changes back into the main project. Git is a tool built to <strong>facilitate and structure the intelligence of a massive, decentralized crowd</strong>. Its widespread adoption is a testament to the power of the development model Torvalds pioneered."
              },
              {
                "heading": "A Different Kind of Wisdom",
                "content": "The success of Linux demonstrates that there is more than one way to harness collective intelligence. It shows that in complex engineering projects, a purely flat or anonymous structure may be less effective than one that combines decentralization with trusted leadership. The 'wisdom' here is not in an average guess, but in a <strong>carefully curated synthesis of the best ideas</strong> from a global pool of talent, guided by a singular, long-term vision. Torvalds' model has since been emulated by countless other successful open-source projects."
              }
            ]
          },
          "jimmy-wales-larry-sanger": {
            "display_order": 70,
            "name": "Jimmy Wales & Larry Sanger: The Open Encyclopedia",
            "display_name": "Wales & Sanger",
            "introduction": "The story of Wikipedia is one of the most remarkable examples of large-scale collective intelligence in human history. It began not as a radical experiment in open collaboration, but as a more traditional, expert-led project called Nupedia. The surprising and explosive success of its 'side project,' Wikipedia, taught its founders, Jimmy Wales and Larry Sanger, a profound lesson about the power of trusting the crowd.",
            "paragraphs": [
              {
                "heading": "From Nupedia to Wikipedia",
                "content": "Nupedia, launched in 2000, was designed to be a free, high-quality online encyclopedia. Its defining feature was a <strong>rigorous, multi-step expert review process</strong>. The result was high-quality content, but at an excruciatingly slow pace; in its first year, only about two dozen articles were published. To speed things up, Larry Sanger proposed a 'side project' using a new technology called a 'wiki,' which would allow anyone to contribute and edit articles instantly. This project, launched on January 15, 2001, was named Wikipedia. It received more contributions in its first month than Nupedia had in its entire existence. The side project had become the main event."
              },
              {
                "heading": "The Five Pillars",
                "content": "Wikipedia's success is not accidental; it is built on a set of core principles that enable productive mass collaboration. These 'Five Pillars' act as the constitution for the community. They establish that Wikipedia is an <strong>encyclopedia</strong> (not a soapbox), is written from a <strong>neutral point of view</strong>, is <strong>free content</strong> that anyone can use, requires editors to treat each other with <strong>respect and civility</strong>, and has <strong>no firm rules</strong> beyond the first four pillars. This simple, elegant rule set provides just enough structure to prevent chaos while maximizing freedom to contribute."
              },
              {
                "heading": "The Power of 'Good Enough'",
                "content": "The transition from Nupedia to Wikipedia represented a profound philosophical shift from a pursuit of initial perfection to a belief in <strong>iterative improvement</strong>. Where Nupedia demanded a perfect article from the start, Wikipedia allowed for a 'stub' or an imperfect article to be created, trusting that the community of users would gradually correct errors, add information, and improve its quality over time. This process, often called 'stigmergy,' allows for massive parallel collaboration where each small contribution leaves a trace that encourages the next, collectively building a complex and high-quality product from simple individual actions."
              },
              {
                "heading": "Neutral Point of View (NPOV)",
                "content": "Arguably the most critical principle for Wikipedia's success is the Neutral Point of View (NPOV) policy. It mandates that articles should represent all significant viewpoints on a topic fairly, proportionately, and without endorsement. This policy is a brilliant solution to the problem of cooperation in a diverse global community. Instead of trying to determine the 'truth,' which would lead to endless debate, Wikipedia's goal is to document what <strong>reliable sources say is the truth</strong>. NPOV transforms potential edit wars into collaborative research projects, channeling conflict into productive content creation."
              },
              {
                "heading": "The Wisdom of Wikinomics",
                "content": "Wikipedia proved that a loosely coordinated, non-hierarchical, and largely volunteer crowd could create a product of global significance that rivaled and, in many areas, surpassed commercial, top-down enterprises like Microsoft's Encarta or the Encyclopedia Britannica. It became the quintessential example of 'Wikinomics,' demonstrating how principles of openness, peering, sharing, and acting globally could unlock unprecedented levels of collective intelligence and productivity. It stands as a testament to the idea that with the right platform and a few simple rules, a crowd can accomplish miracles."
              }
            ]
          },
          "eo-wilson": {
            "display_order": 80,
            "name": "E.O. Wilson: The Superorganism",
            "display_name": "Wilson",
            "introduction": "E.O. Wilson (1929-2021), the pioneering sociobiologist and expert on ants, offered a profound perspective on collective intelligence rooted in the natural world. By studying insect societies, Wilson showed how vast numbers of simple individuals, each with limited information and intelligence, could collectively give rise to a 'superorganism' capable of sophisticated, seemingly intelligent behavior. His work provides a powerful biological analogy for the wisdom of human crowds.",
            "paragraphs": [
              {
                "heading": "The Ant Colony as a Brain",
                "content": "Wilson described an ant colony not as a collection of individual ants, but as a single, distributed organism. No single ant knows the overall plan. The queen is not a commander; she is an egg-laying machine. Yet the colony as a whole accomplishes remarkable feats: building complex nests with ventilation systems, finding the most efficient foraging routes, and defending territory. The colony's 'intelligence' is an <strong>emergent property</strong> of the interactions between thousands of simple individuals. It's a brain with no central processor, where intelligence is spread across the entire network."
              },
              {
                "heading": "The Concept of Stigmergy",
                "content": "A key mechanism for this coordination is stigmergy, a term coined by French biologist Pierre-Paul Grassé. Stigmergy is a form of <strong>indirect communication through the environment</strong>. For example, when a foraging ant finds food, it lays down a pheromone trail on its way back to the nest. Other ants are more likely to follow stronger trails. This creates a positive feedback loop: the more ants that use a good path, the stronger its trail becomes, attracting even more ants. Through this simple, decentralized mechanism, the colony collectively determines the shortest path to the best food source without any single ant having a map."
              },
              {
                "heading": "Simple Rules, Complex Behavior",
                "content": "The genius of insect societies lies in the fact that complex global behavior arises from individuals following a few very simple rules. An ant doesn't need to understand the colony's nutritional needs; it just needs to follow a rule like, 'If you smell pheromone trail X, follow it.' A termite doesn't need an architectural blueprint for a mound; it just needs to follow a rule like, 'If you find a wood pellet with pheromones on it, drop your pellet on top of it.' The multiplication of these <strong>simple, local actions across thousands of individuals</strong> creates the complex, seemingly designed structure of the whole."
              },
              {
                "heading": "Eusociality and Cooperation",
                "content": "Wilson's work focused on 'eusocial' species (like ants, bees, and termites), the highest level of social organization in the animal kingdom. These societies are characterized by cooperative brood care, overlapping generations, and a division of labor into reproductive and non-reproductive castes. He argued that the immense evolutionary success of these species is a direct result of their ability to harness the power of <strong>group cooperation over individual competition</strong>. Their collective intelligence allows them to dominate their ecosystems."
              },
              {
                "heading": "Lessons from the Hive",
                "content": "Wilson's study of superorganisms provides powerful lessons for understanding human collective intelligence. It shows that you don't need smart individuals to get a smart group; you need individuals who can follow simple rules and communicate effectively (even indirectly). It highlights the power of <strong>decentralized, bottom-up organization</strong>. And it suggests that the key to unlocking collective wisdom often lies in designing the right environment and the right simple rules of interaction, then letting the intelligence of the group emerge on its own."
              }
            ]
          }
        }
      }
    }
  </script>

  <div class="fixed top-4 right-4 z-50">
    <button id="settings-btn" class="p-2 rounded-full" aria-label="toggle settings">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.096 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
    </button>
  </div>

  <div id="settings-modal" class="modal-overlay">
    <div class="modal-content">
        <button id="close-modal-btn" class="close-btn">×</button>
        <h3>Display Settings</h3>
        <label for="theme-select">Theme:</label>
        <select id="theme-select"></select>
    </div>
  </div>

  <main id="app-container" class="prose dark:prose-invert mx-auto max-w-prose p-8"></main>

  <script>
    /* ---------- state ---------- */
    let masterLibrary=null,sortedLibraryIds=null,currentLibraryId=null
    let libraryData=null,sortedTopicIds=null,currentTopicId=null,currentArticleId=null
    const app=document.getElementById('app-container')

    /* ---------- helpers ---------- */
    const looksLikeTopic=o=>o&&typeof o==='object'&&('categories'in o||'title'in o)

    /* ---------- rendering ---------- */
    const buildLibrarySwitch=()=>!sortedLibraryIds||sortedLibraryIds.length<2?'':`
      <div class="nav-container">
        <select id="library-switcher" class="nav-button">
          ${sortedLibraryIds.map(id=>{
            const label=id.replace(/-/g,' ').replace(/\b\w/g,c=>c.toUpperCase())
            return `<option value="${id}" ${id===currentLibraryId?'selected':''}>${label}</option>`
          }).join('')}
        </select>
      </div>`

    const buildTopicSwitch=()=>!sortedTopicIds||sortedTopicIds.length<2?'':`
      <div class="nav-container">
        <select id="topic-switcher" class="nav-button">
          ${sortedTopicIds.map(tid=>{
            const t=libraryData[tid];return `<option value="${tid}" ${tid===currentTopicId?'selected':''}>${t.title}</option>`
          }).join('')}
        </select>
      </div>`

    const buildNav=(cats,keys)=>{
      let html='<div class="nav-container"><h3>Select Article:</h3><div class="nav-buttons-wrapper">'
      keys.forEach(k=>{
        const a=cats[k]
        html+=`<button class="nav-button article-btn ${k===currentArticleId?'active':''}" data-article-id="${k}">${a.display_name}</button>`
        if(a.breakAfter)html+='<div class="flex-break"></div>'
      })
      return html+'</div></div>'
    }

    function render(){
      if(!libraryData)return
      
      if(masterLibrary){
          sortedTopicIds = Object.keys(libraryData).sort((a, b) => (libraryData[a].display_order || 0) - (libraryData[b].display_order || 0));
      } else {
          sortedTopicIds = Object.keys(libraryData).sort((a,b)=>(libraryData[a].display_order||0)-(libraryData[b].display_order||0));
      }

      if(!currentTopicId||!libraryData[currentTopicId])currentTopicId=sortedTopicIds[0]
      const topic=libraryData[currentTopicId]
      const artKeys=Object.keys(topic.categories||{}).sort((a,b)=>(topic.categories[a].display_order||0)-(topic.categories[b].display_order||0))
      if(!currentArticleId||!topic.categories[currentArticleId])currentArticleId=artKeys[0]
      const art=topic.categories[currentArticleId]

      app.innerHTML=buildLibrarySwitch()+`<h1>${topic.title}</h1>`+buildTopicSwitch()+buildNav(topic.categories,artKeys)+
        `<h2>${art.name||art.display_name||''}</h2>${art.introduction?`<p>${art.introduction}</p>`:''}`+
        (art.paragraphs||[]).map(p=>`<h3>${p.heading}</h3><div>${p.content}</div>`).join('')
      document.title=topic.title||'Colorful Reader'

      document.querySelectorAll('.article-btn').forEach(btn=>btn.onclick=e=>{
        currentArticleId=e.target.dataset.articleId;render()
      })
      const ts=document.getElementById('topic-switcher')
      if(ts)ts.onchange=e=>{currentTopicId=e.target.value;currentArticleId=null;render()}
      const ls=document.getElementById('library-switcher')
      if(ls)ls.onchange=e=>{
        currentLibraryId=e.target.value
        localStorage.setItem('readerLibraryId',currentLibraryId)
        libraryData=masterLibrary[currentLibraryId];currentTopicId=currentArticleId=null;render()
      }
      
      const themeName = localStorage.getItem('theme') || 'newspaper';
      applyThemeClasses(themeName);
    }

    /* ---------- data load ---------- */
    async function init(){
      let raw=null
      try{
        const res=await fetch('./data/content.json',{cache:'no-store'})
        if(!res.ok)throw new Error('not ok');raw=await res.json()
      }catch{
        const embedded=document.getElementById('embedded-content').textContent.trim()
        if(!embedded)throw new Error('no data');raw=JSON.parse(embedded)
      }

      const keys=Object.keys(raw)
      if(!keys.length)throw new Error('empty data')
      if(looksLikeTopic(raw[keys[0]])){
        masterLibrary=null;sortedLibraryIds=null;currentLibraryId=null
        libraryData=raw
      }else{
        masterLibrary=raw
        sortedLibraryIds=Object.keys(masterLibrary).sort((a, b) => (masterLibrary[a].display_order || 0) - (masterLibrary[b].display_order || 0));
        currentLibraryId=localStorage.getItem('readerLibraryId')
        if(!currentLibraryId||!masterLibrary[currentLibraryId])currentLibraryId=sortedLibraryIds[0]
        libraryData=masterLibrary[currentLibraryId]
      }
      currentTopicId=currentArticleId=null
      render()
    }


    /* ---------- FINAL THEME ENGINE --- */
    const THEMES = {
      'newspaper': { name: 'Newspaper', type: 'classic', isDark: false },
      'dark': { name: 'Dark', type: 'classic', isDark: true },
      'cyber-blue': {
        name: 'Cyber Blue', type: 'variable', isDark: true,
        vars: {
          '--bg-gradient': 'linear-gradient(135deg,#0a0a23 0%,#1a1a3a 50%,#2e2e5e 100%)',
          '--text': '#ecf0f1', '--accent-text': '#a8b8d0',
          '--nav-bg': '#34495e', '--nav-border': '#4a4a4a', '--nav-text': '#ecf0f1',
          '--nav-hover-bg': '#4a6078', '--nav-active-bg': '#2e2e5e', '--nav-active-text': '#ecf0f1'
        },
        hover_style: 'btn-light-text'
      },
      'teal-matrix': {
        name: 'Teal Matrix', type: 'variable', isDark: true,
        vars: {
          '--bg-gradient': 'linear-gradient(135deg,#07201b 0%,#0d2f27 45%,#135348 100%)',
          '--text': '#eaf6f3',
          '--accent-text': '#9de8d9',
          '--nav-bg': '#13433a',
          '--nav-border': '#6fb7a7',
          '--nav-text': '#eaf6f3',
          '--nav-hover-bg': '#175247',
          '--nav-active-bg': '#0a2b24',
          '--nav-active-text': '#ffffff'
        },
        hover_style: 'btn-light-text'
      }
      ,'emerald-paper': {
        name:'Emerald Paper', type:'variable', isDark:false,
        vars:{
          '--bg-gradient':'#f7fbf9',
          '--text':'#1e2b28',
          '--accent-text':'#0f7f6d',
          '--nav-bg':'#e7f3ef',
          '--nav-border':'#86c8ba',
          '--nav-text':'#1e2b28',
          '--nav-hover-bg':'#d7ece6',
          '--nav-active-bg':'#bfe3d9',
          '--nav-active-text':'#1e2b28'
        },
        hover_style:'btn-dark-text'
      },
      'scorched-gold': {
        name: 'Scorched Gold', type: 'variable', isDark: false,
        vars: {
          '--bg-gradient': '#fdfbf5',
          '--text': '#2a1d15',
          '--accent-text': '#996515',
          '--nav-bg': '#f8f4e8',
          '--nav-border': '#996515',
          '--nav-text': '#2a1d15',
          '--nav-hover-bg': '#f3cd86',
          '--nav-active-bg': '#c48b2b',
          '--nav-active-text': '#2a1d15'
        },
        hover_style: 'btn-dark-text'
      }
    };
    
    function applyThemeClasses(themeName) {
        const theme = THEMES[themeName];
        if (!theme) return;

        document.body.classList.remove('newspaper-theme', 'dark-theme', 'variable-theme', 'font-newspaper', 'font-dark-theme');
        document.querySelectorAll('.nav-button').forEach(b => b.classList.remove('btn-light-text', 'btn-dark-text'));

        if (theme.type === 'classic') {
            document.body.classList.add(theme.isDark ? 'dark-theme' : 'newspaper-theme');
            document.body.classList.add(theme.isDark ? 'font-dark-theme' : 'font-newspaper');
        } else {
            document.body.classList.add('variable-theme');
            if (theme.hover_style) {
                document.querySelectorAll('.nav-button').forEach(button => button.classList.add(theme.hover_style));
            }
        }
    }

    function applyThemeVariables(name) {
      const theme = THEMES[name] || THEMES['newspaper'];
      
      document.documentElement.classList.toggle('dark', theme.isDark);

      if (theme.type === 'variable') {
        for (const [key, value] of Object.entries(theme.vars)) {
          document.documentElement.style.setProperty(key, value);
        }
      } else { 
        const sampleVars = THEMES['cyber-blue'].vars;
        Object.keys(sampleVars).forEach(varName => {
            document.documentElement.style.removeProperty(varName);
        });
      }
    }

    function setTheme(name) {
      if (THEMES[name]) {
        localStorage.setItem('theme', name);
        applyThemeVariables(name);
        applyThemeClasses(name);
      }
    }

    function initializeModal() {
        const modal = document.getElementById('settings-modal');
        const openBtn = document.getElementById('settings-btn');
        const closeBtn = document.getElementById('close-modal-btn');
        const themeSelect = document.getElementById('theme-select');
        
        const currentTheme = localStorage.getItem('theme') || 'newspaper';
        themeSelect.innerHTML = Object.keys(THEMES).map(key => {
            const theme = THEMES[key];
            return `<option value="${key}" ${key === currentTheme ? 'selected' : ''}>${theme.name}</option>`
        }).join('');

        openBtn.onclick = () => modal.classList.add('show');
        closeBtn.onclick = () => modal.classList.remove('show');
        modal.onclick = (event) => { if (event.target === modal) modal.classList.remove('show'); };
        themeSelect.onchange = (e) => setTheme(e.target.value);
    }

    /* ---------- boot ---------- */
    document.addEventListener('DOMContentLoaded',()=>{
      const currentTheme = localStorage.getItem('theme') || 'newspaper';
      applyThemeVariables(currentTheme);
      applyThemeClasses(currentTheme);
      
      initializeModal();
      init().catch(err=>{console.error(err);app.innerHTML='<h1>Error</h1><p>Could not load content.</p>'})
    })
  </script>
</body>
</html>
