<!DOCTYPE html>
<html lang="en" class="theme-newspaper">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notebook Catalog — By Subject</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      --bg:#f8fafc; --panel:#ffffff; --border:#e5e7eb; --text:#0f172a; --muted:#475569; --accent:#2563eb;
      --chip-bg:#eef2ff; --chip-text:#3730a3; --chip-border:#c7d2fe; --chip-on:#1d4ed8; --chip-on-bg:#dbeafe;
    }
    body{background:var(--bg); color:var(--text);}
    .panel{background:var(--panel); border:1px solid var(--border); border-radius:12px;}
    .chip{
      display:inline-flex; align-items:center; gap:.5rem; padding:.35rem .7rem; border-radius:999px;
      border:1px solid var(--chip-border); background:var(--chip-bg); color:var(--chip-text);
      font-size:.85rem; line-height:1; cursor:pointer; user-select:none;
    }
    .chip[aria-pressed="true"]{ background:var(--chip-on-bg); color:#0b1f4f; border-color:var(--chip-on);}
    .badge{
      display:inline-block; font-size:.72rem; padding:.15rem .45rem; border-radius:999px; border:1px solid var(--border); color:var(--muted);
    }
    .link{color:var(--accent); text-decoration:underline;}
    .grid{display:grid; grid-template-columns:repeat(1,minmax(0,1fr)); gap:1rem;}
    @media(min-width:640px){ .grid{grid-template-columns:repeat(2,minmax(0,1fr));} }
    @media(min-width:1024px){ .grid{grid-template-columns:repeat(3,minmax(0,1fr));} }
    .card{padding:1rem; border:1px solid var(--border); border-radius:10px; background:#fff; transition:box-shadow .15s, transform .15s;}
    .card:hover{ box-shadow:0 8px 22px rgba(2,6,23,.06); transform:translateY(-1px); }
    .muted{color:var(--muted);}
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;}
  </style>
</head>
<body class="antialiased">
  <header class="max-w-6xl mx-auto px-4 pt-6 pb-2">
    <h1 class="text-2xl font-bold">Notebook Catalog</h1>
    <p class="muted mt-1 text-sm">Filter by <strong>subject</strong> or search by title/id. Tap a card to open the notebook.</p>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-24">
    <section class="panel p-4 sm:p-5 mb-4">
      <div class="flex flex-col sm:flex-row sm:items-center gap-3">
        <div class="flex-1">
          <label for="q" class="sr-only">Search</label>
          <input id="q" type="search" inputmode="search" placeholder="Search notebooks… (title or id)"
                 class="w-full rounded-lg border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>
        <div class="text-sm muted shrink-0" id="counts">0 shown</div>
      </div>
      <div id="chips" class="mt-3 flex flex-wrap gap-2"></div>
    </section>

    <section id="results" class="grid"></section>

    <!-- Inline fallback -->
    <script id="notebooks-data" type="application/json">
      <!-- Paste the notebooks.json array here if you don’t want to host it separately →
[
  {
    "id": "jungian-archetypes",
    "title": "Jungian Archetypes: Exploring the Collective Unconscious",
    "subject": "Psychology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "christian-approaches-salvation",
    "title": "Christian Approaches to God, Christ, and Salvation",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "girard-scapegoat-mimetic",
    "title": "Girard's Scapegoat Theory and Mimetic Desire",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "power-cross-freedom",
    "title": "The Power of the Cross and Christian Freedom",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "common-sense-paine",
    "title": "Common Sense: Thomas Paine's Argument for American Independence",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "fight-income-tax",
    "title": "The Fight for the Income Tax",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "origins-cold-war",
    "title": "Origins of the Cold War",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "joy-spirit",
    "title": "The Joy of the Spirit: Promise, Redemption, and Victory",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "understanding-autism",
    "title": "Understanding Autism Spectrum Disorder",
    "subject": "Psychology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "industrial-progress",
    "title": "Industrial Progress and Development: A Global Perspective",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "roman-innovations",
    "title": "Roman Innovations: From Cityscapes to Frontier Defenses",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "nineteenth-century-britain",
    "title": "Nineteenth-Century Britain: Society, Economy, and Empire",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "moltmann-crucified-god",
    "title": "Moltmann's Theology of the Crucified God",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "relational-dynamics-abuse",
    "title": "Relational Dynamics in Personality Disorders and Abuse",
    "subject": "Psychology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "personality-disorders-violence",
    "title": "Personality Disorders and Intimate Partner Violence",
    "subject": "Psychology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "moltmann-hope-suffering",
    "title": "Moltmann's Theology: Hope, Suffering, and Liberation",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "euphrates-babylon-end",
    "title": "The Euphrates, Babylon, and the End Times",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "behold-your-god",
    "title": "Behold Your God: Understanding His Character and Actions",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "studies-sanctuary-temple",
    "title": "Studies in the Sanctuary and Temple",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "airpower-bombing-debates",
    "title": "Airpower Doctrine and Strategic Bombing Debates",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "sudden-traffic-jams",
    "title": "Sudden Traffic Jams: Emergence to Impact",
    "subject": "Math/Physics",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "everlasting-covenant-faith",
    "title": "The Everlasting Covenant and Justification by Faith",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "nonviolent-atonement",
    "title": "The Nonviolent Atonement: A Theological Odyssey",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "challenging-violent-atonement",
    "title": "Challenging Violent Conceptions of God and Atonement",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "movements-modern-art",
    "title": "Movements in Modern Art",
    "subject": "Art",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "theology-peace-justice",
    "title": "Theology of Peace, Justice, and Reconciliation",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "ntwright-theology-overview",
    "title": "N.T. Wright's Theology: A Critical Overview",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "renaissance-chronicles",
    "title": "The Renaissance Chronicles",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "global-rivalry-cold-war",
    "title": "The Global Rivalry: Cold War Conflicts and Ideologies",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "great-thinkers-ideas",
    "title": "Great Thinkers and Ideas",
    "subject": "Philosophy",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "scientific-revolution",
    "title": "Scientific Revolution",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "nobel-prize-climate",
    "title": "A Nobel Prize for Climate",
    "subject": "Science",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "moral-vision-nt",
    "title": "Moral Vision and Faith in the New Testament",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "idea-pathogens",
    "title": "Idea Pathogens: Cultural Epidemiology and Epistemic Health",
    "subject": "Philosophy",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "conversations-about-god",
    "title": "Conversations About God: Atonement, Sin, and Grace",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "ellen-white-beliefs",
    "title": "Ellen G. White's Writings and Seventh-day Adventist Beliefs",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "sin-not-god",
    "title": "Sin, not God, destroys",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "decision-hygiene",
    "title": "Decision Hygiene: Reducing Noise in Judgments",
    "subject": "Rationality",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "why-allies-won-wwii",
    "title": "Why the Allies Won World War II",
    "subject": "History",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "divine-democracy",
    "title": "The Divine Democracy: God's Rule by Love",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "chrysostom-cross",
    "title": "Chrysostom on God's Patient Cultivation and the Unmasking Cross",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "golden-mouth-clock",
    "title": "The Golden Mouth's Clock: God's Patient Judgment",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  },
  {
    "id": "divine-governance",
    "title": "Divine Governance: Love, Truth, and Free Will",
    "subject": "Theology",
    "url": "#",
    "apps": [],
    "sources": []
  }
]

    </script>
  </main>

  <script>
  (function(){
    const state = { data: [], search: "", activeSubjects: new Set() };

    function esc(s){return String(s).replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));}

    // Subject labels
    const SUBJECT_LABEL = {
      "Theology":"Theology","History":"History","Psychology":"Psychology","Philosophy":"Philosophy",
      "Math/Physics":"Math/Physics","Art":"Art","Science":"Science","Interactive":"Interactive","Misc":"Misc","Geography":"Geography","Warfare":"Warfare"
    };

    // Data loading
    async function loadData(){
      const candidates=["./notebooks.json","../notebooks.json","/notebooks.json"];
      for(const url of candidates){
        try{
          const res=await fetch(url,{cache:"no-store"});
          if(res.ok){ const j=await res.json(); if(Array.isArray(j)) return j; }
        }catch(_){}
      }
      const island=document.getElementById("notebooks-data");
      if(island && island.textContent.trim()){
        try{ const j=JSON.parse(island.textContent); if(Array.isArray(j)) return j; }catch(_){}
      }
      throw new Error("Unable to load notebooks.json");
    }

    const chipsEl=document.getElementById("chips");
    const resultsEl=document.getElementById("results");
    const countsEl=document.getElementById("counts");
    const qEl=document.getElementById("q");

    function buildSubjectChips(data){
      chipsEl.innerHTML="";
      const allBtn=document.createElement("button");
      allBtn.className="chip";
      allBtn.dataset.subject="";
      allBtn.setAttribute("aria-pressed", state.activeSubjects.size===0 ? "true":"false");
      allBtn.innerHTML=`<span>All</span><span class="badge">${data.length}</span>`;
      chipsEl.appendChild(allBtn);

      const counts={};
      for(const item of data){ const s=item.subject||"Misc"; counts[s]=(counts[s]||0)+1; }

      for(const s of Object.keys(SUBJECT_LABEL)){
        if(!counts[s]) continue;
        const btn=document.createElement("button");
        btn.className="chip";
        btn.dataset.subject=s;
        btn.setAttribute("aria-pressed", state.activeSubjects.has(s)? "true":"false");
        btn.innerHTML=`<span>${SUBJECT_LABEL[s]}</span><span class="badge">${counts[s]}</span>`;
        chipsEl.appendChild(btn);
      }
    }

    function apply(){
      const q=(state.search||"").toLowerCase().trim();
      const filtered = state.data.filter(item=>{
        const subj=item.subject||"Misc";
        const ok = state.activeSubjects.size===0 || state.activeSubjects.has(subj);
        if(!ok) return false;
        if(!q) return true;
        return (item.title||"").toLowerCase().includes(q) || (item.id||"").toLowerCase().includes(q);
      });

      filtered.sort((a,b)=>{
        const sa=a.subject||"Misc";
        const sb=b.subject||"Misc";
        if(sa!==sb) return sa.localeCompare(sb);
        return (a.title||"").localeCompare(b.title||"");
      });

      resultsEl.innerHTML="";
      for(const nb of filtered){
        const card=document.createElement("a");
        card.href=nb.url; card.target="_blank"; card.rel="noopener"; card.className="card block";
        card.innerHTML=`
          <div class="flex items-start justify-between gap-3">
            <h3 class="text-base font-semibold leading-tight">${esc(nb.title||nb.id)}</h3>
            <div class="flex gap-2 items-center">
              <span class="badge">${esc(nb.subject||"Misc")}</span>
              <span class="badge">Notebook</span>
            </div>
          </div>
          <p class="muted mt-1 text-sm">${esc(nb.id||"")}</p>
          <p class="mt-2 text-sm"><span class="link">Open</span> →</p>
        `;
        resultsEl.appendChild(card);
      }
      countsEl.textContent=`${filtered.length} shown`;

      chipsEl.querySelectorAll(".chip").forEach(ch=>{
        const s=ch.dataset.subject;
        const on = s ? state.activeSubjects.has(s) : (state.activeSubjects.size===0);
        ch.setAttribute("aria-pressed", on ? "true":"false");
      });
    }

    chipsEl.addEventListener("click",(e)=>{
      const btn=e.target.closest(".chip"); if(!btn) return;
      const s=btn.dataset.subject;
      if(!s){ state.activeSubjects.clear(); }
      else{ state.activeSubjects.has(s) ? state.activeSubjects.delete(s) : state.activeSubjects.add(s); }
      apply();
    });

    qEl.addEventListener("input", ()=>{
      state.search = qEl.value || "";
      apply();
    });

    (async function init(){
      try{
        state.data = await loadData();
        qEl.value = state.search;
        buildSubjectChips(state.data);
        apply();
      }catch(err){
        resultsEl.innerHTML = `
          <div class="panel p-6">
            <h3 class="text-lg font-semibold">Couldn’t load <code>notebooks.json</code></h3>
            <p class="muted mt-1">Place this file at the repo root and refresh, or paste it in the inline data-island above.</p>
          </div>`;
      }
    })();
  })();
  </script>
</body>
</html>

