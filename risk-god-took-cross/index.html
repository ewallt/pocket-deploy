<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>The Risk God Took at the Cross — Colorful Reader</title>
<meta name="description" content="A single-file reader presenting a compact knowledge base on the risk God took at the cross within the Great Controversy frame."/>
<style>
:root{
  /* Token-parity defaults (swap to your house theme any time) */
  --bg:#0b1020; --panel:#0f172a; --ink:#e5e7eb; --muted:#94a3b8; --brand:#22d3ee;
  --chip:#1f2937; --chip-ink:#cbd5e1; --accent:#38bdf8; --border:#1e293b; --card:#111827;
  --radius:14px; --gap:14px; --pad:16px; --maxw:1080px; --shadow:0 10px 30px rgba(0,0,0,.25);
}
@media (prefers-color-scheme: light){
  :root{ --bg:#f7fafc; --panel:#ffffff; --ink:#0f172a; --muted:#475569; --brand:#0ea5e9;
         --chip:#eef2ff; --chip-ink:#1f2a56; --accent:#2563eb; --border:#e5e7eb; --card:#ffffff; }
}
*{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu}
.wrap{max-width:var(--maxw);margin:0 auto;padding:24px}
.header{background:linear-gradient(180deg,rgba(255,255,255,.04),transparent);border:1px solid var(--border);border-radius:var(--radius);padding:28px;box-shadow:var(--shadow)}
.h1{margin:0 0 6px;font-size:28px;letter-spacing:.2px}
.desc{margin:0;color:var(--muted)}
.tools{display:flex;gap:var(--gap);align-items:center;margin:16px 0 0;flex-wrap:wrap}
.search{flex:1;display:flex;gap:10px;min-width:260px}
.search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--ink)}
.chips{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
.chip{background:var(--chip);color:var(--chip-ink);padding:6px 10px;border-radius:999px;font-size:12px;border:1px solid var(--border)}
.grid{display:grid;grid-template-columns:1fr;gap:var(--gap);margin-top:20px}
.section{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:18px}
.section h2{margin:0 0 8px;font-size:18px}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px;margin-top:12px}
.card h3{margin:0 0 6px;font-size:16px}
.meta{font-size:12px;color:var(--muted)}
.footer{margin:28px 0 60px;color:var(--muted);font-size:13px}
.src-list a{color:var(--accent);text-decoration:none}
.bad{color:#ffb4b4}
.good{color:#8ef69c}
.note{display:block;margin-top:8px}
.kberr{white-space:pre-wrap;background:#361a1a;border:1px solid #5f2b2b;border-radius:10px;padding:12px;color:#ffdede;margin-top:12px}
.hide{display:none}
</style>
</head>
<body>
<div class="wrap">
  <header class="header">
    <h1 class="h1" id="title"></h1>
    <p class="desc" id="description"></p>
    <div class="tools">
      <div class="search">
        <input id="q" placeholder="Search cards… (titles & content)"/>
      </div>
      <span class="chip" id="count">0 cards</span>
      <span class="chip" id="validChip">validating…</span>
    </div>
    <div id="kbErrors" class="kberr hide"></div>
    <div class="chips" id="chips"></div>
  </header>

  <main class="grid" id="grid"></main>

  <footer class="footer">
    <div class="src-list" id="sources"></div>
    <div class="note">Theme tokens exposed; swap <code>:root</code> to match your Colorful Reader palette.</div>
  </footer>
</div>

<!-- Embedded KB JSON (no placeholders; the app reads this block directly) -->
<script id="kb" type="application/json">
{
  "schema_version": "1.0",
  "title": "The Risk God Took at the Cross",
  "description": "Within the Great Controversy, the cross shows God’s non-coercive love entering genuine vulnerability: Christ ‘risked all’ and took the ‘risk of failure and eternal loss,’ unmasking Satan and winning the universe’s trust.",
  "sections": [
    {
      "id": "main-idea",
      "name": "Main Idea",
      "cards": [
        {
          "type": "note",
          "title": "Love that Risks",
          "content": "Biblical revelation presents God as love (1 Jn 4:8). Love respects freedom and bears real cost. In the incarnation and crucifixion, God embraces genuine vulnerability—risk—not because He lacks power or knowledge, but because love refuses coercion."
        },
        {
          "type": "note",
          "title": "Cosmic Stakes",
          "content": "The cross is a public, universe-wide demonstration (Eph 3:10; Col 2:15). By voluntarily suffering, Jesus exposes Satan’s character as murderous and false, and vindicates God’s goodness before all beings."
        }
      ]
    },
    {
      "id": "biblical-grounding",
      "name": "Biblical Grounding",
      "cards": [
        {"type": "verse","title": "Philippians 2:5–11 (Kenosis)","content": "Christ ‘emptied Himself’—the downward path of humility culminating in the cross—revealing God’s character as self-giving."},
        {"type": "verse","title": "Hebrews 2:14–18","content": "By sharing our flesh and blood, Jesus faces death to destroy the devil’s hold and to become a merciful, faithful High Priest."},
        {"type": "verse","title": "Luke 22:44; Matthew 27:46","content": "Gethsemane and the cry of dereliction spotlight the depth of suffering and the real cost borne in faithfulness."},
        {"type": "verse","title": "John 12:31–33; Colossians 2:15","content": "The cross judges ‘the ruler of this world’ and disarms powers—public exposure of evil in contrast to divine love."},
        {"type": "verse","title": "Revelation 12","content": "The war in heaven frames the cross as the decisive turning point in the cosmic conflict."}
      ]
    },
    {
      "id": "key-quotations",
      "name": "Key Quotations (E. G. White)",
      "cards": [
        {"type": "quote","title": "“Heaven Itself Was Imperiled” (COL 196.4)","content": "“Remember that Christ risked all. For our redemption, heaven itself was imperiled.”"},
        {"type": "quote","title": "“Risk of Failure and Eternal Loss” (DA 131.2)","content": "“He … for us took the risk of failure and eternal loss.”"}
      ]
    },
    {
      "id": "theological-rationale",
      "name": "Theological Rationale",
      "cards": [
        {"type": "note","title": "Risk and Omniscience","content": "‘Risk’ does not deny divine knowledge. It asserts that within a world of genuinely free agents, God chooses non-coercive love, allowing real opposition and real suffering to play out—then overcomes it through self-giving."},
        {"type": "note","title": "Warfare Framing","content": "The cross functions as God’s decisive move in a moral war, revealing truth and breaking evil’s claims without violating freedom."}
      ]
    },
    {
      "id": "objections",
      "name": "Objections & Responses",
      "cards": [
        {"type": "qa","title": "Does ‘risk’ imply God might have failed?","content": "The language emphasizes the genuineness of Christ’s temptations and sufferings. Scripture shows prophetic certainty, yet the path to victory involved authentic struggle, not theatrical pretense."},
        {"type": "qa","title": "Does ‘risk’ undermine sovereignty?","content": "No. Sovereignty is shown as patient, self-giving authority. God’s power is not threatened by His love; it is displayed through it (1 Cor 1:18–25)."}
      ]
    },
    {
      "id": "practice",
      "name": "Practical Implications",
      "cards": [
        {"type": "note","title": "Faith as Trust in Agape","content": "Faith grows as a heart-level appreciation of God’s agape at the cross, leading to repentance and loyal love."}
      ]
    },
    {
      "id": "further-reading",
      "name": "Further Reading",
      "cards": [
        {"type": "ref","title": "Graham Maxwell, Can God Be Trusted?","content": "Accessible presentation of God’s character in the Great Controversy motif."},
        {"type": "ref","title": "Gregory A. Boyd, God at War; Satan and the Problem of Evil","content": "Warfare theodicy; helpful background for cosmic-conflict framing."}
      ]
    }
  ],
  "sources": [
    {"id":"col-196","title":"Christ’s Object Lessons 196.4","url":"https://whiteestate.org/devotional/ag/06_16/","note":"“Christ risked all… heaven itself was imperiled.”"},
    {"id":"da-131","title":"The Desire of Ages 131.2","url":"https://m.egwwritings.org/en/book/130.509","note":"“Risk of failure and eternal loss.”"}
  ]
}
</script>

<script>
/* ===== Tiny runtime validator ===== */
function validateKB(kb){
  const errs=[];
  function must(obj,key,type){ if(!(key in obj)) errs.push(`Missing key: ${key}`); else if(typeof obj[key]!==type) errs.push(`Type mismatch: ${key} should be ${type}`); }
  must(kb,"schema_version","string"); must(kb,"title","string"); must(kb,"description","string");
  if(!Array.isArray(kb.sections)) errs.push("sections must be an array");
  else kb.sections.forEach((s,i)=>{
    ["id","name"].forEach(k=>{ if(!(k in s)||typeof s[k]!=="string") errs.push(`sections[${i}].${k} missing/string`); });
    if(!Array.isArray(s.cards)) errs.push(`sections[${i}].cards must be array`);
    else s.cards.forEach((c,j)=>{
      ["type","title","content"].forEach(k=>{ if(!(k in c)||typeof c[k]!=="string") errs.push(`sections[${i}].cards[${j}].${k} missing/string`); });
    });
  });
  if(!Array.isArray(kb.sources)) errs.push("sources must be an array");
  else kb.sources.forEach((s,i)=>{
    ["id","title","url","note"].forEach(k=>{ if(!(k in s)||typeof s[k]!=="string") errs.push(`sources[${i}].${k} missing/string`); });
  });
  return errs;
}

/* ===== Render & search ===== */
function el(tag,cls,txt){ const e=document.createElement(tag); if(cls) e.className=cls; if(txt!=null) e.textContent=txt; return e; }
function render(kb){
  document.getElementById("title").textContent=kb.title;
  document.getElementById("description").textContent=kb.description;
  const grid=document.getElementById("grid"); grid.innerHTML="";
  let total=0;
  kb.sections.forEach(sec=>{
    const s=el("section","section");
    s.appendChild(el("h2",null,sec.name));
    sec.cards.forEach(card=>{
      total++;
      const c=el("article","card");
      c.dataset.title=card.title.toLowerCase(); c.dataset.content=card.content.toLowerCase();
      c.appendChild(el("h3",null,card.title));
      c.appendChild(el("p","meta",card.type));
      c.appendChild(el("p",null,card.content));
      s.appendChild(c);
    });
    grid.appendChild(s);
  });
  document.getElementById("count").textContent = total + " cards";
  const srcDiv=document.getElementById("sources");
  srcDiv.innerHTML="<strong>Sources:</strong> " + kb.sources.map(s=>`<a href="${s.url}" target="_blank" rel="noopener">${s.title}</a>`).join(" · ");
  const chips=document.getElementById("chips"); chips.innerHTML="";
  kb.sections.forEach(sec=>chips.appendChild(el("span","chip",sec.name)));
}

function wireSearch(){
  const q=document.getElementById("q");
  const grid=document.getElementById("grid");
  q.addEventListener("input",()=>{
    const t=q.value.trim().toLowerCase();
    let shown=0;
    [...grid.querySelectorAll(".section")].forEach(sec=>{
      let secShown=0;
      [...sec.querySelectorAll(".card")].forEach(card=>{
        const hit = !t || card.dataset.title.includes(t) || card.dataset.content.includes(t);
        card.style.display = hit ? "" : "none";
        if(hit) secShown++;
      });
      sec.style.display = secShown? "":"none";
      shown+=secShown;
    });
    document.getElementById("count").textContent = shown + " cards";
  });
}

/* ===== Boot ===== */
(function(){
  const chip=document.getElementById("validChip");
  const box=document.getElementById("kbErrors");
  try{
    const raw=document.getElementById("kb").textContent.trim();
    const kb=JSON.parse(raw);
    const errs=validateKB(kb);
    if(errs.length){
      chip.textContent="schema: invalid"; chip.classList.add("bad");
      box.classList.remove("hide"); box.textContent = "Schema errors:\n- " + errs.join("\n- ");
      return;
    }
    chip.textContent="schema: valid"; chip.classList.add("good");
    render(kb); wireSearch();
  }catch(e){
    chip.textContent="schema: parse error"; chip.classList.add("bad");
    box.classList.remove("hide"); box.textContent = "KB parse error: " + e.message;
  }
})();
</script>
</body>
</html>
