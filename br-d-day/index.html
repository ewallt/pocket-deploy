<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D-Day Knowledge Base Explorer</title>
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg,#2c3e50 0%,#34495e 100%);
            --accent-1: #e74c3c;
            --accent-2: #c03b2b;
            --btn-gradient: linear-gradient(45deg,#e74c3c,#c0392b);
            --accent-1-rgb: 231, 76, 60;
            --accent-warning: #ffc107;
            --accent-warning-rgb: 255, 193, 7;
            --text-primary: #ecf0f1;
            --text-secondary: #bdc3c7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: var(--bg-gradient);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .header {
            background: rgba(0,0,0,0.3);
            padding: 2rem;
            text-align: center;
            border-bottom: 3px solid var(--accent-1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-top: 0;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, var(--accent-1), var(--accent-2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            filter: drop-shadow(0 0 15px rgba(var(--accent-1-rgb), 0.3));
        }

        .header p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0,0,0,0.2);
            padding: 1rem;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        /* --- FINAL BUTTON RULES START --- */

        /* Base style for ALL buttons */
        .tab-button, #settings-btn, .sector-button {
            padding: 12px 24px;
            background: var(--ui-background);
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 5px;
            font-size: 1rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Specific settings for the icon */
        #settings-btn {
            font-size: 1.2rem;
            padding: 10px 15px;
        }

        /* HOVER state for buttons */
        .tab-button:hover, .sector-button:hover, #settings-btn:hover {
            background: var(--btn-gradient);
            transform: translateY(-2px);
        }

        /* ACTIVE state for selected buttons */
        .tab-button.active, .sector-button.active {
            background: var(--btn-gradient);
            border-color: var(--accent-2);
            transform: translateY(-2px);
            color: var(--btn-text-active);
        }

        /* LOGIC-DRIVEN TEXT COLOR FOR HOVER AND ACTIVE STATES */
        .btn-light-text:hover, .btn-light-text.active {
             color: var(--text-primary);
        }
        .btn-dark-text:hover, .btn-dark-text.active {
             color: var(--btn-text-active);
        }
        
        /* --- FINAL BUTTON RULES END --- */

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background: #2c3e50;
            padding: 2rem;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            width: 90%;
            max-width: 400px;
        }

        .modal-content h3 {
            color: var(--accent-1);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }
        
        .modal-content label {
            font-size: 1.1rem;
            margin-right: 10px;
        }

        #theme-select {
            background-color: var(--ui-background);
            color: var(--text-primary);
            border: 1px solid var(--accent-2);
            border-radius: 5px;
            padding: 8px;
            font-size: 1rem;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            background: none;
            border: none;
            cursor: pointer;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: var(--text-primary);
            text-decoration: none;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .section-title {
            color: var(--accent-1);
            font-size: 1.8rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--accent-1);
        }

        .subsection {
            margin: 1.5rem 0;
        }

        .subsection h3 {
            color: var(--accent-1);
            font-size: 1.3rem;
            margin-bottom: 0.8rem;
        }

        .subsection h4 {
            color: var(--accent-2);
            font-size: 1.1rem;
            margin: 1rem 0 0.5rem 0;
        }

        .sector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .sector-card {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 1.5rem;
            border-left: 4px solid var(--accent-1);
            transition: transform 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .sector-card:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.1);
        }

        .sector-name {
            color: var(--accent-1);
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .casualties-highlight {
            background: rgba(var(--accent-warning-rgb), 0.15);
            padding: 1rem;
            border-radius: 5px;
            border-left: 4px solid var(--accent-warning);
            margin: 1rem 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

           .stat-card {
            background: var(--ui-background-accent);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-1);
            display: block;
        }

        .stat-label {
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        .search-box {
            width: 100%;
            padding: 12px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
            margin-bottom: 2rem;
        }

        .search-box::placeholder {
            color: var(--text-secondary);
        }

        .highlight {
            background: rgba(var(--accent-1-rgb), 0.3);
            padding: 2px 4px;
            border-radius: 3px;
        }

        .interactive-map {
            background: var(--container-background-subtle);
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sector-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .sector-detail {
            display: none;
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }

        .sector-detail.show {
            display: block;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            .nav-tabs {
                flex-direction: column;
                align-items: center;
            }
            .container {
                padding: 1rem;
            }
            .sector-grid {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <script>
    // Self-executing function to manage all theme logic.
    (function() {
        const DEFAULT_THEME_NAME = 'cyber-night';
    
        let THEMES = {
    'cyber-night': {
        '--bg-gradient': 'linear-gradient(135deg,#0a0a23 0%,#1a1a3a 50%,#2e2e5e 100%)',
        '--accent-1': '#a8b8d0', '--accent-1-rgb': '168, 184, 208',
        '--accent-2': '#8899b3',
        '--btn-gradient': 'linear-gradient(45deg,#1a1a3a,#2e2e5e)',
        '--accent-warning': '#e8b339',
        '--accent-warning-rgb': '232, 179, 57',
        '--ui-background': '#34495e',
        '--ui-background-accent': 'rgba(52, 73, 94, 0.8)',
        '--container-background-subtle': 'rgba(0, 0, 0, 0.3)',
        '--btn-text-active': '#ecf0f1' // Light text for dark button
    },
    'teal-matrix': {
        '--bg-gradient': 'linear-gradient(135deg,#0a231c 0%,#1a3a31 50%,#2e5e50 100%)',
        '--accent-1': '#ace0d5', '--accent-1-rgb': '172, 224, 213',
        '--accent-2': '#92b3a9',
        '--btn-gradient': 'linear-gradient(45deg,#1a3a31,#2e5e50)',
        '--accent-warning': '#e8b339',
        '--accent-warning-rgb': '232, 179, 57',
        '--ui-background': '#345e55',
        '--ui-background-accent': 'rgba(52, 94, 85, 0.8)',
        '--container-background-subtle': 'rgba(0, 0, 0, 0.3)',
        '--btn-text-active': '#ecf0f1' // Light text for dark button
    },
'red-alert': {
        '--bg-gradient': 'linear-gradient(135deg,#0a0a23 0%,#1a1a3a 50%,#2e2e5e 100%)',
        '--ui-background': '#34495e',
        '--ui-background-accent': 'rgba(52, 73, 94, 0.8)',
        '--container-background-subtle': 'rgba(0, 0, 0, 0.3)',
        '--accent-1': '#e74c3c',
        '--accent-2': '#c03b2b',
        '--btn-gradient': 'linear-gradient(45deg,#e74c3c,#c0392b)',
        '--accent-1-rgb': '231, 76, 60',
        '--accent-warning': '#e8b339',
        '--accent-warning-rgb': '232, 179, 57',
        '--btn-text-active': '#ffffff' // Light text for mid-tone button
    },
'scorched-gold': {
    // --- Deep Teal Base ---
    '--bg-gradient': 'linear-gradient(135deg,#0a231f 0%,#193a33 50%,#2e5e54 100%)',
    '--ui-background': '#345e56',
    '--ui-background-accent': 'rgba(52, 94, 86, 0.8)',
    '--container-background-subtle': 'rgba(0, 0, 0, 0.3)',

    // --- Gold & Amber Accents ---
    '--accent-1': '#f0c475', // Bright Gold
    '--accent-2': '#d4a24c', // Darker Amber
    '--btn-gradient': 'linear-gradient(45deg,#f0c475,#d4a24c)',
    '--accent-1-rgb': '240, 196, 117',
    '--btn-text-active': '#2a1d15', // Dark text for the gold button
    '--btn-text-hover': '#2a1d15',  // Dark text for the gold button

    // --- Standard Warning Color ---
    '--accent-warning': '#e8b339',
    '--accent-warning-rgb': '232, 179, 57'
},
'crimson-emerald': {
        '--bg-gradient': 'linear-gradient(135deg,#0a230a 0%,#1a3a1a 50%,#2e5e2e 100%)',
        '--ui-background': '#345e49',
        '--ui-background-accent': 'rgba(52, 94, 73, 0.8)',
        '--container-background-subtle': 'rgba(0, 0, 0, 0.3)',
        '--accent-1': '#e04f7f',
        '--accent-2': '#c73363',
        '--btn-gradient': 'linear-gradient(45deg,#e04f7f,#c73363)',
        '--accent-1-rgb': '224, 79, 127',
        '--accent-warning': '#e8b339',
        '--accent-warning-rgb': '232, 179, 57',
        '--btn-text-active': '#ffffff' // Light text for mid-tone button
    },
'emerald-cyber': {
                '--bg-gradient': 'linear-gradient(135deg,#0a230a 0%,#1a3a1a 50%,#2e5e2e 100%)',
                '--accent-1': '#a8d0b8', '--accent-1-rgb': '168, 208, 184',
                '--accent-2': '#6a947a', '--btn-gradient': 'linear-gradient(45deg,#1a3a1a,#2e5e2e)',
                '--accent-warning': '#ffc107', '--accent-warning-rgb': '255, 193, 7',
                '--accent-warning-rgb': '232, 179, 57',
                '--ui-background': '#34495e',
                '--ui-background-accent': 'rgba(52, 73, 94, 0.8)',
                '--container-background-subtle': 'rgba(0, 0, 0, 0.3)'

            },
'scorched-copper': {
    // --- Dark, Earthy Brown Base ---
    '--bg-gradient': 'linear-gradient(135deg,#2a1d15 0%,#4e3427 50%,#5a4032 100%)',
    '--ui-background': '#5a4032',
    '--ui-background-accent': 'rgba(90, 64, 50, 0.8)',
    '--container-background-subtle': 'rgba(26, 15, 8, 0.3)',

    // --- Bright Copper Accents ---
    '--accent-1': '#d4af37', // A bright gold/copper
    '--accent-2': '#b87333', // A darker, true copper
    '--btn-gradient': 'linear-gradient(45deg,#d4af37,#b87333)',
    '--accent-1-rgb': '212, 175, 55',
    '--btn-text-active': '#2a1d15', // Dark brown text for the bright button
    '--btn-text-hover': '#2a1d15',  // Dark brown text for the bright button

    // --- Sandy Gold Warning Color ---
    '--accent-warning': '#f0e68c',
    '--accent-warning-rgb': '240, 230, 140'
},
    'emerald-night': {
        '--bg-gradient': 'linear-gradient(135deg,#0a230a 0%,#1a3a1a 50%,#2e5e2e 100%)',
        '--accent-1': '#a8d0b8', '--accent-1-rgb': '168, 208, 184',
        '--accent-2': '#6a947a',
        '--btn-gradient': 'linear-gradient(45deg,#1a3a1a,#2e5e2e)',
        '--accent-warning': '#ffc107', '--accent-warning-rgb': '255, 193, 7',
        '--ui-background': '#345e49',
        '--ui-background-accent': 'rgba(52, 94, 73, 0.8)',
        '--container-background-subtle': 'rgba(0, 0, 0, 0.3)',
        '--btn-text-active': '#ecf0f1' // Light text for dark button
    }
    
};

        function finalizeThemes(themes) {
            for (const themeName in themes) {
                const theme = themes[themeName];
                const gradient = theme['--btn-gradient'];

                // Simple check for light/luminous hex codes in the gradient
                if (gradient.includes('#d') || gradient.includes('#e') || gradient.includes('#f') || gradient.includes('#99e') || gradient.includes('#cd')) {
                    theme.hover_style = 'btn-dark-text'; 
                } else {
                    theme.hover_style = 'btn-light-text';
                }
            }
            return themes;
        }

        THEMES = finalizeThemes(THEMES);
    
        function applyTheme(name) {
            const theme = THEMES[name];
            if (theme) {
                const root = document.documentElement;
                for (const [key, value] of Object.entries(theme)) {
                    if(key !== 'hover_style') { // Don't try to set hover_style as a CSS variable
                        root.style.setProperty(key, value);
                    }
                }

                const buttons = document.querySelectorAll('.tab-button, .sector-button, #settings-btn');
                buttons.forEach(button => {
                    button.classList.remove('btn-light-text', 'btn-dark-text');
                    if (theme.hover_style) {
                        button.classList.add(theme.hover_style);
                    }
                });
            }
        }
    
        window.setTheme = function(name) {
            applyTheme(name);
            localStorage.setItem('dday-theme', name);
        }
    
        const availableThemeNames = Object.keys(THEMES);
        const savedTheme = localStorage.getItem('dday-theme');
        let themeToLoad = DEFAULT_THEME_NAME;

        if (savedTheme && availableThemeNames.includes(savedTheme)) {
            themeToLoad = savedTheme;
        }
        
        applyTheme(themeToLoad);
    
        document.addEventListener('DOMContentLoaded', () => {
            const themeSelect = document.getElementById('theme-select');
            if (themeSelect) {
                availableThemeNames.forEach(name => {
                    const option = document.createElement('option');
                    option.value = name;
                    option.textContent = name.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                    themeSelect.appendChild(option);
                });
                themeSelect.value = themeToLoad;
            }
        });
    })();
    </script>
</head>
<body>
    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content">
            <button id="close-modal-btn" class="close-btn">&times;</button>
            <h3>Display Settings</h3>
            <label for="theme-select">Theme:</label>
            <select id="theme-select" onchange="setTheme(this.value)"></select>
        </div>
    </div>

    <div class="header">
        <h1>D-Day: Operation Overlord</h1>
        <p>June 6, 1944 • The Normandy Landings • Knowledge Base Explorer</p>
    </div>

    <div class="nav-tabs">
        <button class="tab-button active" data-tab="overview">Overview</button>
        <button class="tab-button" data-tab="planning">Pre-Invasion Planning</button>
        <button class="tab-button" data-tab="beaches">Beach Landings</button>
        <button class="tab-button" data-tab="airborne">Airborne Operations</button>
        <button class="tab-button" data-tab="casualties">Casualties & Losses</button>
        <button class="tab-button" data-tab="aftermath">Immediate Aftermath</button>
        <button class="tab-button" data-tab="search">Search Knowledge</button>
        <button id="settings-btn" title="Settings">⚙️</button>
    </div>

    <div class="container">
        <div id="overview" class="tab-content active">
             <div class="section-card">
                <h2 class="section-title">Operation Overlord: The Normandy Invasion</h2>
                <p style="font-size: 1.2rem; line-height: 1.8; margin-bottom: 2rem;">
                    On June 6, 1944, Allied forces launched the largest amphibious invasion in history, assaulting five Normandy beaches and conducting simultaneous airborne drops inland. This massive undertaking, known as Operation Overlord, marked the beginning of the liberation of Western Europe from Nazi occupation.
                </p>

                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">155,000</span>
                        <div class="stat-label">Allied Troops Assembled</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">5</span>
                        <div class="stat-label">Beach Landing Zones</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">13,000</span>
                        <div class="stat-label">Allied Air Sorties</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">10,000</span>
                        <div class="stat-label">Total Allied Casualties</div>
                    </div>
                </div>

                <div class="interactive-map">
                    <h3 style="color: var(--accent-1); margin-bottom: 1rem;">The Five Landing Sectors</h3>
                    <p>Click on each sector to learn more about the specific operations:</p>
                    <div class="sector-buttons">
                        <button class="sector-button" data-sector="utah">Utah Beach</button>
                        <button class="sector-button" data-sector="omaha">Omaha Beach</button>
                        <button class="sector-button" data-sector="gold">Gold Beach</button>
                        <button class="sector-button" data-sector="juno">Juno Beach</button>
                        <button class="sector-button" data-sector="sword">Sword Beach</button>
                    </div>

                    <div id="utah-detail" class="sector-detail">
                        <h4 style="color: var(--accent-1);">Utah Beach - U.S. 7th Infantry Division</h4>
                        <p><strong>Casualties:</strong> ~197 (lightest of all beaches)</p>
                        <p><strong>Key Objective:</strong> Secure beachhead around Merderet estuary and advance toward Sainte-Mère-Église</p>
                    </div>
                    <div id="omaha-detail" class="sector-detail">
                        <h4 style="color: var(--accent-1);">Omaha Beach - U.S. 1st & 29th Infantry Divisions</h4>
                        <p><strong>Casualties:</strong> ~2,000 (heaviest losses)</p>
                        <p><strong>Key Challenge:</strong> Heavily fortified with concrete casemates, 88mm artillery, and high bluffs</p>
                    </div>
                    <div id="gold-detail" class="sector-detail">
                        <h4 style="color: var(--accent-1);">Gold Beach - British 50th Infantry Division</h4>
                        <p><strong>Casualties:</strong> ~400</p>
                        <p><strong>Key Objective:</strong> Capture Arromanches-les-Bains and link with Canadian forces</p>
                    </div>
                    <div id="juno-detail" class="sector-detail">
                        <h4 style="color: var(--accent-1);">Juno Beach - Canadian 3rd Infantry Division</h4>
                        <p><strong>Casualties:</strong> ~961</p>
                        <p><strong>Key Objective:</strong> Clear coastal villages and push toward Caen-Bayeux road</p>
                    </div>
                    <div id="sword-detail" class="sector-detail">
                        <h4 style="color: var(--accent-1);">Sword Beach - British 3rd Infantry Division</h4>
                        <p><strong>Casualties:</strong> ~630</p>
                        <p><strong>Key Objective:</strong> Capture Caen and link with airborne forces</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="planning" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">Pre-Invasion Context and Planning</h2>
                <div class="sector-grid">
                    <div class="sector-card">
                        <h3 class="sector-name">Strategic Objectives</h3>
                        <p>The chief aim of Operation Overlord was to secure a lodgment area on the northern coast of France from which Allied forces could advance eastward into Germany.</p>
                    </div>
                    <div class="sector-card">
                        <h3 class="sector-name">Allied Command (SHAEF)</h3>
                        <p><strong>Supreme Commander:</strong> Gen. Dwight D. Eisenhower</p>
                        <p><strong>Ground Forces:</strong> Gen. Bernard Montgomery</p>
                        <p><strong>Naval Forces:</strong> Adm. Sir Bertram Ramsay</p>
                    </div>
                    <div class="sector-card">
                        <h3 class="sector-name">Intelligence and Deception</h3>
                        <h4>Operation Fortitude</h4>
                        <p>A fictitious army group under Gen. George Patton was created to mislead the German high command about the true invasion site at Pas-de-Calais.</p>
                    </div>
                </div>
                <div class="casualties-highlight">
                    <h4>Critical Decision Point</h4>
                    <p>The initial invasion on June 5 was postponed 24 hours due to a storm. Allied meteorologists found a brief window of calm weather for June 6, prompting Eisenhower's final "go" order. German forecasters expected poor weather to continue—a critical factor in the Allies' favor.</p>
                </div>
            </div>
        </div>

        <div id="beaches" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">Beach Landings - June 6, 1944</h2>
                <div class="sector-grid">
                    <div class="sector-card">
                        <div class="sector-name">Utah Beach</div>
                        <p><strong>Forces:</strong> U.S. 7th Infantry Division</p>
                        <p><strong>Outcome:</strong> Strong currents pushed landing craft into a lightly defended area, resulting in a successful landing and link-up with the 82nd Airborne.</p>
                        <div class="casualties-highlight">
                            <strong>Casualties:</strong> ~197 (Lightest)
                        </div>
                    </div>
                    <div class="sector-card">
                        <div class="sector-name">Omaha Beach</div>
                        <p><strong>Forces:</strong> U.S. 1st & 29th Infantry Divisions</p>
                        <p><strong>Outcome:</strong> Faced intense fire and heavily fortified defenses. Small units eventually found gaps and established a tenuous foothold by late afternoon.</p>
                        <div class="casualties-highlight">
                            <strong>Casualties:</strong> ~2,000+ (Heaviest)
                        </div>
                    </div>
                    <div class="sector-card">
                        <div class="sector-name">Gold Beach</div>
                        <p><strong>Forces:</strong> British 50th Infantry Division</p>
                        <p><strong>Outcome:</strong> Overcame initial resistance with armored support and established a deep sector-head by nightfall, linking with Canadian forces.</p>
                        <div class="casualties-highlight">
                            <strong>Casualties:</strong> ~400
                        </div>
                    </div>
                    <div class="sector-card">
                        <div class="sector-name">Juno Beach</div>
                        <p><strong>Forces:</strong> Canadian 3rd Infantry Division</p>
                        <p><strong>Outcome:</strong> After facing heavy resistance, Canadian troops pushed further inland than any other Allied force on D-Day.</p>
                        <div class="casualties-highlight">
                            <strong>Casualties:</strong> ~961
                        </div>
                    </div>
                    <div class="sector-card">
                        <div class="sector-name">Sword Beach</div>
                        <p><strong>Forces:</strong> British 3rd Infantry Division</p>
                        <p><strong>Outcome:</strong> Successfully linked with British airborne forces, but German counterattacks prevented the capture of the key objective, Caen.</p>
                        <div class="casualties-highlight">
                            <strong>Casualties:</strong> ~630
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="airborne" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">Airborne Operations</h2>
                <div class="sector-grid">
                    <div class="sector-card">
                        <h3 class="sector-name">American 82nd and 101st Airborne</h3>
                        <p>Despite scattered drops, US paratroopers successfully captured the key town of Sainte-Mère-Église and secured vital causeways, preventing German reinforcements from reaching Utah Beach.</p>
                        <div class="casualties-highlight">
                            <strong>U.S. Airborne Casualties:</strong> ~1,400
                        </div>
                    </div>
                    <div class="sector-card">
                        <h3 class="sector-name">British 6th Airborne - Operation Tonga</h3>
                        <p>In a textbook glider assault, British forces captured the Pegasus and Horsa bridges intact, securing the eastern flank of the invasion. They also successfully neutralized the heavy guns of the Merville Battery.</p>
                        <div class="casualties-highlight">
                           <strong>British Airborne Casualties:</strong> ~500
                        </div>
                    </div>
                </div>
                <div class="subsection">
                    <h3>Strategic Impact</h3>
                    <p style="font-size: 1.1rem; line-height: 1.7;">
                        The airborne operations were crucial to D-Day's success. By securing the flanks, capturing key bridges, and creating chaos behind German lines, the paratroopers prevented an effective German response to the amphibious landings and became legendary symbols of courage and precision.
                    </p>
                </div>
            </div>
        </div>

        <div id="casualties" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">Casualties and Equipment Losses</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number">~10,000</span>
                        <div class="stat-label">Total Allied Casualties</div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number">~2,500</span>
                        <div class="stat-label">Allied Killed in Action</div>
                    </div>
                     <div class="stat-card">
                        <span class="stat-number">~4,000-9,000</span>
                        <div class="stat-label">German Casualties (Est.)</div>
                    </div>
                </div>
                <div class="sector-grid">
                    <div class="sector-card">
                        <h3 class="sector-name">Naval & Landing Craft</h3>
                        <p>Rough seas and enemy fire sank or damaged numerous landing craft, especially at Omaha. Several large Landing Ships (Tank) were also lost, delaying the arrival of armor and supplies.</p>
                    </div>
                     <div class="sector-card">
                        <h3 class="sector-name">Tanks & Armor</h3>
                         <p>The amphibious DD "swimming" tanks experienced heavy losses, with 27 of 29 sinking before reaching Omaha Beach. In total, approximately 80 Allied tanks were lost across all sectors on D-Day.</p>
                    </div>
                     <div class="sector-card">
                        <h3 class="sector-name">Aircraft Losses</h3>
                         <p>Allied air forces flew over 13,000 sorties. Approximately 110 aircraft were lost to anti-aircraft fire and accidents, a remarkably low number given the scale of the operation.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="aftermath" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">Immediate Follow-On Operations</h2>
                <div class="sector-grid">
                     <div class="sector-card">
                        <h3 class="sector-name">Linking The Sectors</h3>
                        <p>Within two days of the landing, Allied forces successfully linked the individual sectors, creating a continuous front approximately 50 miles long and several miles deep.</p>
                     </div>
                     <div class="sector-card">
                        <h3 class="sector-name">Mulberry Harbors</h3>
                        <p>Two massive, prefabricated artificial harbors were towed across the English Channel. "Mulberry B" at Arromanches became a vital lifeline, allowing the Allies to unload thousands of tons of supplies daily.</p>
                     </div>
                     <div class="sector-card">
                        <h3 class="sector-name">The Battle for Normandy</h3>
                        <p>D-Day was just the beginning. The subsequent Battle for Normandy lasted for over two months and involved brutal fighting in the dense "bocage" country of France.</p>
                     </div>
                     <div class="sector-card">
                        <h3 class="sector-name">German Response</h3>
                        <p>The German response was initially slow and confused, thanks to Allied deception operations. While some Panzer divisions launched counterattacks, they were unable to dislodge the Allied foothold.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="search" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">Search the Knowledge Base</h2>
                <input type="text" id="searchInput" class="search-box" placeholder="Search for people, places, units, operations, or any topic...">
                
                <div id="searchResults">
                    <p style="text-align: center; color: var(--text-secondary); font-style: italic; margin: 2rem 0;">
                        Enter a search term above to explore the D-Day knowledge base.<br>
                        Try searching for: "Eisenhower", "Omaha casualties", "airborne", "weather", "Mulberry harbors", etc.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Knowledge base for searching
        const knowledgeBase = {
            "Eisenhower": "General Dwight D. Eisenhower was appointed Supreme Commander of the Allied Expeditionary Force. Eisenhower gave the final go order on June 5 at 21:15 after meteorologists predicted acceptable weather conditions.",
            "weather": "The initial planned invasion date was June 5, 1944, but a storm forced a 24-hour postponement to June 6. German forecasters expected poor weather and delayed redeployment of Panzer divisions—a critical factor in the Allies favor.",
            "Montgomery": "General Bernard Montgomery oversaw ground forces under 21st Army Group, which consisted of the British Second Army and the Canadian First Army.",
            "Bradley": "General Omar Bradley commanded the First U.S. Army, which was assigned to land on the two westernmost beaches at Utah and Omaha.",
            "Patton": "General George Patton commanded the fictitious U.S. First Army Group as part of Operation Fortitude South, the deception operation that misled Germans about the invasion location.",
            "Operation Fortitude": "To mislead German high command about the intended invasion site, the Allies launched Operation Fortitude. Fictitious units, including FUSAG commanded by General Patton, were portrayed east of Kent, England.",
            "Ultra": "Allied cryptanalysis of German Enigma traffic (Ultra intelligence) and extensive photo-reconnaissance flights over northern France produced detailed information on German defenses and coastal fortifications known as the Atlantic Wall.",
            "Atlantic Wall": "Field Marshal Erwin Rommel had overseen construction of the Atlantic Wall—an extensive system of concrete bunkers, gun emplacements, minefields, and anti-tank obstacles.",
            "Rommel": "Field Marshal Erwin Rommel had overseen construction of the Atlantic Wall and was responsible for German coastal defenses in Normandy.",
            "airborne": "U.S. 82nd and 101st Airborne Divisions conducted drops behind Utah Beach. British 6th Airborne Division executed Operation Tonga, capturing Pegasus Bridge and destroying the Merville Battery.",
            "Pegasus Bridge": "Lieutenant Den Brotheridge led an assault that captured Pegasus Bridge over the Caen canal within minutes of landing, preventing German armor from attacking from the east.",
            "Sainte-Mere-Eglise": "Paratroopers captured Sainte-Mere-Eglise, making it the first town liberated in France on D-Day.",
            "Merville Battery": "British paratroopers succeeded in silencing five 150mm guns at Merville Battery, neutralizing a major threat to Sword Beach.",
            "Utah Beach casualties": "Utah Beach had the lightest casualties of all beaches with approximately 197 killed, wounded, or missing on D-Day.",
            "Omaha casualties": "Omaha Beach suffered the heaviest casualties with over 2,000 casualties on D-Day, including 1,000-1,200 killed.",
            "Gold Beach casualties": "Gold Beach had approximately 400 casualties among British forces.",
            "Juno Beach casualties": "Juno Beach had approximately 961 casualties among Canadian forces.",
            "Sword Beach casualties": "Sword Beach had approximately 630 casualties among British forces.",
            "total casualties": "Approximately 10,000 Allied casualties on D-Day. German casualties are estimated between 4,000 and 9,000.",
            "Mulberry harbors": "Two prefabricated artificial harbors—Mulberry A off Omaha and Mulberry B off Arromanches. Mulberry B remained operational, enabling rapid offloading of 7,000 tons of supplies daily.",
            "DD tanks": "At Omaha Beach, only 27 of 29 amphibious Sherman tanks reached shore; 27 of 56 sank before landing, delaying armor support.",
            "Caen": "British Second Army sought to capture Caen on D-Day; however, strong German resistance delayed its fall until July 9.",
            "Carentan": "First U.S. Army prioritized connecting Utah and Omaha areas via Carentan. After intense fighting, the town was captured, allowing concentration of forces.",
            "21st Panzer": "The 21st Panzer Division was stationed near Caen but did not begin moving to reinforce until late morning due to delayed authorization from Hitler."
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            initializeSectorButtons();
            initializeSearch();
            initializeModal();
        });

        function initializeModal() {
            const modal = document.getElementById('settings-modal');
            const openBtn = document.getElementById('settings-btn');
            const closeBtn = document.getElementById('close-modal-btn');

            if (modal && openBtn && closeBtn) {
                openBtn.addEventListener('click', () => {
                    modal.classList.add('show');
                });

                closeBtn.addEventListener('click', () => {
                    modal.classList.remove('show');
                });

                modal.addEventListener('click', (event) => {
                    if (event.target === modal) {
                        modal.classList.remove('show');
                    }
                });
            }
        }

        function initializeTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    showTab(tabName);
                });
            });
        }

        function showTab(tabName) {
            try {
                const tabContents = document.querySelectorAll('.tab-content');
                tabContents.forEach(content => {
                    if (content && content.classList) {
                        content.classList.remove('active');
                    }
                });

                const tabButtons = document.querySelectorAll('.tab-button');
                tabButtons.forEach(button => {
                    if (button && button.classList) {
                        button.classList.remove('active');
                    }
                });

                const targetTab = document.getElementById(tabName);
                if (targetTab && targetTab.classList) {
                    targetTab.classList.add('active');
                }

                const activeButton = document.querySelector(`[data-tab="${tabName}"]`);
                if (activeButton && activeButton.classList) {
                    activeButton.classList.add('active');
                }
            } catch (error) {
                console.error('Error in showTab:', error);
            }
        }

        function initializeSectorButtons() {
            const sectorButtons = document.querySelectorAll('.sector-button');
            sectorButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const sectorName = this.getAttribute('data-sector');
                    showSectorDetail(sectorName, this);
                });
            });
        }

        function showSectorDetail(sector, clickedButton) {
            try {
                const details = document.querySelectorAll('.sector-detail');
                details.forEach(detail => detail.classList.remove('show'));

                const buttons = document.querySelectorAll('.sector-button');
                buttons.forEach(button => button.classList.remove('active'));

                const targetDetail = document.getElementById(sector + '-detail');
                if (targetDetail) {
                    targetDetail.classList.add('show');
                    clickedButton.classList.add('active');
                }
            } catch (error) {
                console.error('Error in showSectorDetail:', error);
            }
        }

        function initializeSearch() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('keyup', searchContent);
            }
        }

        function searchContent() {
            try {
                const searchInput = document.getElementById('searchInput');
                const resultsDiv = document.getElementById('searchResults');
                
                if (!searchInput || !resultsDiv) return;
                
                const searchTerm = searchInput.value.toLowerCase();

                if (searchTerm.length < 2) {
                    resultsDiv.innerHTML = '<p style="text-align: center; color: var(--text-secondary); font-style: italic; margin: 2rem 0;">Enter a search term above to explore the D-Day knowledge base.<br>Try searching for: "Eisenhower", "Omaha casualties", "airborne", "weather", "Mulberry harbors", etc.</p>';
                    return;
                }

                let results = [];
                
                for (const key in knowledgeBase) {
                    if (knowledgeBase.hasOwnProperty(key)) {
                        const value = knowledgeBase[key];
                        if (key.toLowerCase().includes(searchTerm) || value.toLowerCase().includes(searchTerm)) {
                            results.push({
                                title: key,
                                content: value,
                                relevance: key.toLowerCase().startsWith(searchTerm) ? 2 : 1
                            });
                        }
                    }
                }

                results.sort((a, b) => b.relevance - a.relevance);

                if (results.length === 0) {
                    resultsDiv.innerHTML = `<div class="section-card"><h3 style="color: var(--accent-1);">No results found for "${searchInput.value}"</h3><p>Try searching for commander names, beach names, operations, or key terms.</p></div>`;
                    return;
                }

                let resultHTML = `<h3 style="color: var(--accent-1); margin-bottom: 1.5rem;">Search Results for "${searchInput.value}"</h3>`;
                
                for (let i = 0; i < results.length; i++) {
                    const result = results[i];
                    const highlightedContent = result.content.replace(new RegExp(searchTerm, 'gi'), '<span class="highlight">$&</span>');
                    
                    resultHTML += `<div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid var(--accent-1);"><h4 style="color: var(--accent-1); margin-bottom: 0.8rem;">${result.title}</h4><p style="line-height: 1.6;">${highlightedContent}</p></div>`;
                }

                resultsDiv.innerHTML = resultHTML;
            } catch (error) {
                console.error('Error in searchContent:', error);
            }
        }
    </script>
</body>
</html>
